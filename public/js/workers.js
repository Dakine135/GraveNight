!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s="./clientSource/js/lineOfSight.worker.js")}({"./clientSource/js/lineOfSight.worker.js":
/*!***********************************************!*\
  !*** ./clientSource/js/lineOfSight.worker.js ***!
  \***********************************************/
/*! no static exports found */function(t,e,o){const n=o(/*! ../../shared/Utilities.js */"./shared/Utilities.js"),i=o(/*! ../../shared/Hitbox.js */"./shared/Hitbox.js");console.log("Worker created"),onmessage=function(t){let e=t.data;!function({objectsInRange:t={},origin:e=null,renderDistance:o=500}){for(var r in t){let l=t[r],a=i.getVisualPoints({obj:l.hitbox,viewPoint:e,getPointsAfterEdge:!0});a.forEach(function(i){let r=i;i.extend&&(r=n.extendEndPoint({startPoint:e,endPoint:i,length:o}));this.getCollision({objects:t,origin:e,point:r})}.bind(this))}}({objectsInRange:e.objectsInRange,origin:e.origin,renderDistance:e.renderDistance})}},"./shared/Hitbox.js":
/*!**************************!*\
  !*** ./shared/Hitbox.js ***!
  \**************************/
/*! no static exports found */function(t,e,o){var n=o(/*! ../shared/Utilities.js */"./shared/Utilities.js");e.create=({id:t=0,x:e=0,y:o=0,width:n=50,height:i=50,angle:r=0})=>{let l=o-i/2,a=o+i/2,x=e-n/2,h=e+n/2;return{id:t,x:e,y:o,width:n,height:i,angle:r,top:l,bottom:a,left:x,right:h,topLeft:{x:x,y:l},topRight:{x:h,y:l},bottomLeft:{x:x,y:a},bottomRight:{x:h,y:a},points:[{x:x,y:l},{x:h,y:l},{x:x,y:a},{x:h,y:a}]}},e.moveTo=function(t,e,o){t.hitbox.x=e,t.hitbox.y=o,function(t){let e=t.hitbox,o=e.y-e.height/2,n=e.y+e.height/2,i=e.x-e.width/2,r=e.x+e.width/2;e.top=o,e.bottom=n,e.left=i,e.right=r,e.topLeft={x:i,y:o},e.topRight={x:r,y:o},e.bottomLeft={x:i,y:n},e.bottomRight={x:r,y:n}}(t)},e.getVisualPoints=function({obj:t,viewPoint:e,getPointsAfterEdge:o=!1}){let i=[];if(e.y<t.top)if(e.x<t.left){i=[t.topLeft,t.topRight,t.bottomLeft];let o=n.rotatePoint({center:e,point:t.bottomLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topRight,angle:-.01});r.extend=!0,i.push(r)}else if(e.x>t.right){i=[t.topLeft,t.topRight,t.bottomRight];let o=n.rotatePoint({center:e,point:t.topLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomRight,angle:-.01});r.extend=!0,i.push(r)}else{i=[t.topLeft,t.topRight];let o=n.rotatePoint({center:e,point:t.topLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topRight,angle:-.01});r.extend=!0,i.push(r)}else if(e.y>t.bottom)if(e.x<t.left){i=[t.topLeft,t.bottomLeft,t.bottomRight];let o=n.rotatePoint({center:e,point:t.bottomRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topLeft,angle:-.01});r.extend=!0,i.push(r)}else if(e.x>t.right){i=[t.topRight,t.bottomLeft,t.bottomRight];let o=n.rotatePoint({center:e,point:t.topRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomLeft,angle:-.01});r.extend=!0,i.push(r)}else{i=[t.bottomLeft,t.bottomRight];let o=n.rotatePoint({center:e,point:t.bottomRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomLeft,angle:-.01});r.extend=!0,i.push(r)}else if(e.x<t.left){i=[t.topLeft,t.bottomLeft];let o=n.rotatePoint({center:e,point:t.bottomLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topLeft,angle:-.01});r.extend=!0,i.push(r)}else if(e.x>t.right){i=[t.topRight,t.bottomRight];let o=n.rotatePoint({center:e,point:t.topRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomRight,angle:-.01});r.extend=!0,i.push(r)}else console.log("Catch in getVisualPoints, possibly viewPoint is inside the box");return(i.length<4||i.length>5)&&console.log("Wrong amount of points:",i.length),i},e.colliding=function(t,e){let o=t.hitbox,n=e.hitbox,i=!1;return i=!(o.top>n.bottom||o.bottom<n.top||o.right<n.left||o.left>n.right)},e.collideLineLine=function(t,e){var o=((e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1))/((e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1)),n=((t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1))/((e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1));return o>=0&&o<=1&&n>=0&&n<=1&&{x:t.x1+o*(t.x2-t.x1),y:t.y1+o*(t.y2-t.y1)}},e.collideLineRect=function(t,e){let o=this.collideLineLine(x1,y1,x2,y2,rx,ry,rx,ry+rh),n=this.collideLineLine(x1,y1,x2,y2,rx+rw,ry,rx+rw,ry+rh),i=this.collideLineLine(x1,y1,x2,y2,rx,ry,rx+rw,ry),r=this.collideLineLine(x1,y1,x2,y2,rx,ry+rh,rx+rw,ry+rh);return!!(o||n||i||r)&&{left:o,right:n,top:i,bottom:r}}},"./shared/Utilities.js":
/*!*****************************!*\
  !*** ./shared/Utilities.js ***!
  \*****************************/
/*! no static exports found */function(t,e){e.error=t=>{new Error(t)},e.randomColor=function(){return{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random())}},e.midPoint=(t,e)=>{return{x:e.x-(e.x-e.x)/2,y:e.y-(e.y-t.y)/2}},e.rotatePoint=({center:t={x:0,y:0},point:e={x:0,y:0},angle:o=0})=>{let n=Math.sin(o),i=Math.cos(o),r={x:e.x,y:e.y};r.x-=t.x,r.y-=t.y;let l=r.x*i-r.y*n,a=r.x*n+r.y*i;return r.x=l+t.x,r.y=a+t.y,r},e.extendEndPoint=({startPoint:t,endPoint:e,length:o})=>{let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),i=o-n;return{x:e.x+(e.x-t.x)/n*i,y:e.y+(e.y-t.y)/n*i}},e.dist=function(t,e){let o=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.sqrt(Math.pow(o,2)+Math.pow(n,2),2)},e.calculateAngle=({point1:t,point2:e,centerPoint:o={x:0,y:0}})=>{if(t.x===e.x&&t.y===e.y)return 0;let n={x:t.x-o.x,y:t.y-o.y},i={x:e.x-o.x,y:e.y-o.y},r=Math.atan2(n.y,n.x),l=Math.atan2(i.y,i.x);return r<0&&(r+=2*Math.PI),l<0&&(l+=2*Math.PI),l-r},e.mapNum=({input:t,start1:e,end1:o,start2:n,end2:i})=>{return t<e?t=e:t>o&&(t=o),(i-n)*((t-e)/(o-e))+n},e.cloneObject=function t(e){let o={};for(var n in e){let i=e[n];"object"==typeof i&&null!==i&&(o[n]=t(i)),null!==i&&(o[n]=i)}return o},e.memorySizeOf=function(t){var e=0;return function(t){return t<1024?t+" bytes":t<1048576?(t/1024).toFixed(3)+" KiB":t<1073741824?(t/1048576).toFixed(3)+" MiB":(t/1073741824).toFixed(3)+" GiB"}(function t(o){if(null!=o)switch(typeof o){case"number":e+=8;break;case"string":e+=2*o.length;break;case"boolean":e+=4;break;case"object":var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n||"Array"===n)for(var i in o)o.hasOwnProperty(i)&&t(o[i]);else e+=2*o.toString().length}return e}(t))}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50U291cmNlL2pzL2xpbmVPZlNpZ2h0Lndvcmtlci5qcyIsIndlYnBhY2s6Ly8vLi9zaGFyZWQvSGl0Ym94LmpzIiwid2VicGFjazovLy8uL3NoYXJlZC9VdGlsaXRpZXMuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJVdGlsaXRpZXMiLCJIaXRib3giLCJjb25zb2xlIiwibG9nIiwib25tZXNzYWdlIiwiZXZlbnQiLCJkYXRhIiwib2JqZWN0c0luUmFuZ2UiLCJvcmlnaW4iLCJyZW5kZXJEaXN0YW5jZSIsImlkIiwicG9pbnRzIiwiZ2V0VmlzdWFsUG9pbnRzIiwib2JqIiwiaGl0Ym94Iiwidmlld1BvaW50IiwiZ2V0UG9pbnRzQWZ0ZXJFZGdlIiwiZm9yRWFjaCIsInBvaW50IiwicG9pbnRUb0NoZWNrIiwiZXh0ZW5kIiwiZXh0ZW5kRW5kUG9pbnQiLCJzdGFydFBvaW50IiwiZW5kUG9pbnQiLCJsZW5ndGgiLCJ0aGlzIiwiZ2V0Q29sbGlzaW9uIiwib2JqZWN0cyIsImdldFBvaW50cyIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJhbmdsZSIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsInRvcExlZnQiLCJ0b3BSaWdodCIsImJvdHRvbUxlZnQiLCJib3R0b21SaWdodCIsIm1vdmVUbyIsInVwZGF0ZSIsInJldHVyblBvaW50cyIsInBSb3RhdGVkQ1ciLCJyb3RhdGVQb2ludCIsImNlbnRlciIsInB1c2giLCJwUm90YXRlZENDVyIsImNvbGxpZGluZyIsIm9iajEiLCJvYmoyIiwiaGl0Ym94MSIsImhpdGJveDIiLCJyb3VnaENvbGxpZGluZyIsImNvbGxpZGVMaW5lTGluZSIsImxpbmUxIiwibGluZTIiLCJ1QSIsIngyIiwieDEiLCJ5MSIsInkyIiwidUIiLCJjb2xsaWRlTGluZVJlY3QiLCJsaW5lIiwicmVjIiwicngiLCJyeSIsInJoIiwicnciLCJlcnJvciIsInN0cmluZyIsIkVycm9yIiwicmFuZG9tQ29sb3IiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnIiwiYiIsIm1pZFBvaW50IiwicG9pbnQxIiwicG9pbnQyIiwic2luIiwiY29zIiwibmV3UG9pbnQiLCJ4bmV3IiwieW5ldyIsImN1cnJlbnRsZW5ndGgiLCJzcXJ0IiwicG93IiwiYW1vdW50IiwiZGlzdCIsImRpZmZYIiwiYWJzIiwiZGlmZlkiLCJjYWxjdWxhdGVBbmdsZSIsImNlbnRlclBvaW50IiwicDFUcmFucyIsInAyVHJhbnMiLCJhbmdsZU9mUDEiLCJhdGFuMiIsImFuZ2xlT2ZQMiIsIlBJIiwibWFwTnVtIiwiaW5wdXQiLCJzdGFydDEiLCJlbmQxIiwic3RhcnQyIiwiZW5kMiIsImNsb25lT2JqZWN0IiwibmV3T2JqIiwicHJvcGVyeSIsIm1lbW9yeVNpemVPZiIsImJ5dGVzIiwidG9GaXhlZCIsImZvcm1hdEJ5dGVTaXplIiwic2l6ZU9mIiwib2JqQ2xhc3MiLCJ0b1N0cmluZyIsInNsaWNlIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNB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ZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9jbGllbnRTb3VyY2UvanMvbGluZU9mU2lnaHQud29ya2VyLmpzXCIpO1xuIiwiY29uc3QgVXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vc2hhcmVkL1V0aWxpdGllcy5qcycpO1xyXG5jb25zdCBIaXRib3ggPSByZXF1aXJlKCcuLi8uLi9zaGFyZWQvSGl0Ym94LmpzJyk7XHJcblxyXG5jb25zb2xlLmxvZyhcIldvcmtlciBjcmVhdGVkXCIpO1xyXG5cclxub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpe1xyXG5cdGxldCBkYXRhID0gZXZlbnQuZGF0YTtcclxuXHQvLyBjb25zb2xlLmxvZyhcIm1lc3NhZ2UgcmVjZWl2ZWQgaW4gd29ya2VyOlwiLCBldmVudC5kYXRhKTtcclxuXHQvLyBsZXQgdGVzdFJldHVybiA9IGV2ZW50LmRhdGEgKiAyO1xyXG5cdC8vIHBvc3RNZXNzYWdlKHRlc3RSZXR1cm4pO1xyXG5cdGxldCBwb2ludHNUb1NlbmQgPSBnZXRQb2ludHMoe1xyXG5cdFx0b2JqZWN0c0luUmFuZ2U6IGRhdGEub2JqZWN0c0luUmFuZ2UsXHJcblx0XHRvcmlnaW46ICAgICAgICAgZGF0YS5vcmlnaW4sXHJcblx0XHRyZW5kZXJEaXN0YW5jZTogZGF0YS5yZW5kZXJEaXN0YW5jZVxyXG5cdH0pO1xyXG59Ly9vbiBtZXNzYWdlXHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBnZXRQb2ludHMoe1xyXG5cdG9iamVjdHNJblJhbmdlPXt9LFxyXG5cdG9yaWdpbj1udWxsLFxyXG5cdHJlbmRlckRpc3RhbmNlPTUwMFxyXG59KXtcclxuXHRmb3IodmFyIGlkIGluIG9iamVjdHNJblJhbmdlKXtcclxuXHRcdGxldCBvYmplY3QgPSBvYmplY3RzSW5SYW5nZVtpZF07XHJcblx0XHRsZXQgcG9pbnRzID0gSGl0Ym94LmdldFZpc3VhbFBvaW50cyh7XHJcblx0XHRcdG9iajogICAgICAgICBvYmplY3QuaGl0Ym94LFxyXG5cdFx0XHR2aWV3UG9pbnQ6ICAgb3JpZ2luLFxyXG5cdFx0XHRnZXRQb2ludHNBZnRlckVkZ2U6IHRydWVcclxuXHRcdH0pO1xyXG5cclxuXHRcdHBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uKHBvaW50KXtcclxuXHJcblx0XHRcdGxldCBwb2ludFRvQ2hlY2sgPSBwb2ludDtcclxuXHRcdFx0aWYocG9pbnQuZXh0ZW5kKXtcclxuXHRcdFx0XHRwb2ludFRvQ2hlY2sgPSBVdGlsaXRpZXMuZXh0ZW5kRW5kUG9pbnQoe1xyXG5cdFx0XHRcdFx0c3RhcnRQb2ludDogb3JpZ2luLCBcclxuXHRcdFx0XHRcdGVuZFBvaW50OiBwb2ludCwgXHJcblx0XHRcdFx0XHRsZW5ndGg6IHJlbmRlckRpc3RhbmNlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGxldCBjb2xsaXNpb24gPSB0aGlzLmdldENvbGxpc2lvbih7XHJcblx0XHRcdFx0b2JqZWN0czogb2JqZWN0c0luUmFuZ2UsIFxyXG5cdFx0XHRcdG9yaWdpbjogIG9yaWdpbiwgXHJcblx0XHRcdFx0cG9pbnQ6ICAgcG9pbnRUb0NoZWNrXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly9jYWxjdWxhdGUgXCJsb3N0XCIgaW50ZW5zaXR5XHJcblx0XHRcdC8vIGxldCBsb3N0SW50ZW5zaXR5ID0gKGludGVuc2l0eSAtIGNvbGxpc2lvbi5kaXN0KTtcclxuXHRcdFx0Ly8gdGhpcy5hZGRHb3dpbmdPYmplY3Qoe29iajogY29sbGlzaW9uLm9iamVjdCwgaW50ZW5zaXR5OiBsb3N0SW50ZW5zaXR5fSk7XHJcblxyXG5cdFx0XHQvLyBsZXQgdmlld1BvaW50ID0gdGhpcy5nZXRWaWV3UG9pbnQoe1xyXG5cdFx0XHQvLyBcdHBvaW50OiBjb2xsaXNpb24ucG9pbnQsIFxyXG5cdFx0XHQvLyBcdGVkZ2U6ICAhY29sbGlzaW9uLmNvbGxpc2lvbixcclxuXHRcdFx0Ly8gXHRjb2xvcjogKGNvbGxpc2lvbi5jb2xsaXNpb24gPyBcImdyZWVuXCIgOiBcInllbGxvd1wiKSxcclxuXHRcdFx0Ly8gXHRuYW1lOiBcIlBcIixcclxuXHRcdFx0Ly8gXHRvcmlnaW46IG9yaWdpblxyXG5cdFx0XHQvLyB9KTtcclxuXHRcdFx0Ly8gbGlzdE9mUG9pbnRzLnB1c2godmlld1BvaW50KTtcclxuXHJcblx0XHR9LmJpbmQodGhpcykpO1xyXG5cdH0vL2ZvciBvYmplY3RzIGluIHJhbmdlXHJcbn0vL2dldCBQb2ludHNcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0Q29sbGlzaW9uKHtvYmplY3RzLCBvcmlnaW4sIHBvaW50LCBkaXN0YW5jZT1JbmZpbml0eX0pe1xyXG5cdFx0Ly9jaGVjayBhbGwgb2JqZWN0cyBpbiByYW5nZSBmb3IgY29sbGlzaW9uXHJcblx0XHRsZXQgY2xvc2VzdENvbGxpc2lvbiA9IGZhbHNlO1xyXG5cdFx0bGV0IGNsb3Nlc3RTZWdtZW50ID0gbnVsbDtcclxuXHRcdGxldCBjbG9zZXN0RGlzdCA9IEluZmluaXR5O1xyXG5cdFx0Ly9mb3Igb2JqZWN0IGdsb3dcclxuXHRcdGxldCBjbG9zZXN0T2JqID0gbnVsbDtcclxuXHRcdGZvcih2YXIgaWQgaW4gb2JqZWN0cyl7XHJcblx0XHRcdGxldCBvYmplY3QgPSBvYmplY3RzW2lkXTtcclxuXHRcdFx0bGV0IGNvbGxpc2lvbiA9IHRoaXMuZ2V0SW50ZXJzZWN0aW9uKG9iamVjdC5oaXRib3gsIHt4MTogb3JpZ2luLngsICB5MTogb3JpZ2luLnksXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgICAgICB4MjogcG9pbnQueCwgICB5MjogcG9pbnQueX0pO1xyXG5cdFx0XHRpZihjb2xsaXNpb24pe1xyXG5cdFx0XHRcdGxldCBkaXN0ID0gVXRpbGl0aWVzLmRpc3QoY29sbGlzaW9uLnBvaW50LCBvcmlnaW4pO1xyXG5cdFx0XHRcdGlmKGNsb3Nlc3REaXN0ID4gZGlzdCl7XHJcblx0XHRcdFx0XHRjbG9zZXN0T2JqID0gb2JqZWN0O1xyXG5cdFx0XHRcdFx0Y2xvc2VzdERpc3QgPSBkaXN0O1xyXG5cdFx0XHRcdFx0Y2xvc2VzdENvbGxpc2lvbiA9IGNvbGxpc2lvbi5wb2ludDtcclxuXHRcdFx0XHRcdGNsb3Nlc3RTZWdtZW50ID0gY29sbGlzaW9uLmxpbmU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9Ly9mb3Igb2JqZWN0cyBpbiByYW5nZVxyXG5cclxuXHRcdGlmKGNsb3Nlc3RDb2xsaXNpb24gJiYgY2xvc2VzdERpc3QgPCBkaXN0YW5jZSl7XHJcblx0XHRcdC8vbWFrZSBwb2ludHMgYXQgdGhlIGNvcm5lcnMgb2YgdGhlIGJveFxyXG5cdFx0XHRsZXQgcG9pbnQxID0ge3g6IGNsb3Nlc3RTZWdtZW50LngxLCB5OiBjbG9zZXN0U2VnbWVudC55MX07XHJcblx0XHRcdGxldCBwb2ludDIgPSB7eDogY2xvc2VzdFNlZ21lbnQueDIsIHk6IGNsb3Nlc3RTZWdtZW50LnkyfTtcclxuXHRcdFx0bGV0IGFuZ2xlQ29sbGlzaW9uVG9Qb2ludDEgPSB0aGlzLmNhbGN1bGF0ZUFuZ2xlKHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvaW50MTogcG9pbnQxLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2VudGVyUG9pbnQ6b3JpZ2lufSk7XHJcblx0XHRcdGxldCBhbmdsZUNvbGxpc2lvblRvUG9pbnQyID0gdGhpcy5jYWxjdWxhdGVBbmdsZSh7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb2ludDE6IHBvaW50MixcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgY2VudGVyUG9pbnQ6b3JpZ2lufSk7XHJcblx0XHRcdGxldCBhbmdsZUNvbGxpc2lvbiA9IHRoaXMuY2FsY3VsYXRlQW5nbGUoe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cG9pbnQxOiBjbG9zZXN0Q29sbGlzaW9uLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBjZW50ZXJQb2ludDpvcmlnaW59KTtcclxuXHJcblx0XHRcdGxldCBjd1BvaW50O1xyXG5cdFx0XHRsZXQgY2N3UG9pbnQ7XHJcblx0XHRcdGlmKGFuZ2xlQ29sbGlzaW9uVG9Qb2ludDEgPiBhbmdsZUNvbGxpc2lvblRvUG9pbnQyKXtcclxuXHRcdFx0XHRjd1BvaW50ICA9IHBvaW50MTtcclxuXHRcdFx0XHRjd1BvaW50LmFuZ2xlID0gYW5nbGVDb2xsaXNpb25Ub1BvaW50MTtcclxuXHRcdFx0XHRjY3dQb2ludCA9IHBvaW50MjtcclxuXHRcdFx0XHRjY3dQb2ludC5hbmdsZSA9IGFuZ2xlQ29sbGlzaW9uVG9Qb2ludDI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y3dQb2ludCAgPSBwb2ludDI7XHJcblx0XHRcdFx0Y3dQb2ludC5hbmdsZSA9IGFuZ2xlQ29sbGlzaW9uVG9Qb2ludDI7XHJcblx0XHRcdFx0Y2N3UG9pbnQgPSBwb2ludDE7XHJcblx0XHRcdFx0Y2N3UG9pbnQuYW5nbGUgPSBhbmdsZUNvbGxpc2lvblRvUG9pbnQxO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjbG9zZXN0Q29sbGlzaW9uLmFuZ2xlID0gYW5nbGVDb2xsaXNpb247XHJcblxyXG5cdFx0XHQvL21ha2Ugc3VyZSBib3ggZWRnZXMgYXJlIG5vdCBvdXQgb2YgcmFuZ2VcclxuXHRcdFx0Ly8gaWYoY3dQb2ludC5hbmdsZSAgPj0gZW5kUG9pbnRBbmdsZSB8fCBjd1BvaW50LmFuZ2xlICA8PSBzdGFydFBvaW50QW5nbGUpe1xyXG5cdFx0XHQvLyBcdGN3UG9pbnQgPSBudWxsO1xyXG5cdFx0XHQvLyB9XHJcblx0XHRcdC8vIGlmKGNjd1BvaW50LmFuZ2xlID49IGVuZFBvaW50QW5nbGUgfHwgY2N3UG9pbnQuYW5nbGUgPD0gc3RhcnRQb2ludEFuZ2xlKXtcclxuXHRcdFx0Ly8gXHRjY3dQb2ludCA9IG51bGw7XHJcblx0XHRcdC8vIH1cclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0Y29sbGlzaW9uOiB0cnVlLFxyXG5cdFx0XHRcdHBvaW50OiBjbG9zZXN0Q29sbGlzaW9uLFxyXG5cdFx0XHRcdGRpc3Q6IGNsb3Nlc3REaXN0LFxyXG5cdFx0XHRcdGN3UG9pbnQ6IGN3UG9pbnQsXHJcblx0XHRcdFx0Y2N3UG9pbnQ6IGNjd1BvaW50LFxyXG5cdFx0XHRcdG9iamVjdDogY2xvc2VzdE9ialxyXG5cdFx0XHR9XHJcblx0XHR9Ly9jbG9zZXN0IENvbGxpc2lvblxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0Y29sbGlzaW9uOiBmYWxzZSxcclxuXHRcdFx0XHRwb2ludDogcG9pbnRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0vL2dldENvbGxpc2lvbiIsInZhciBVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi9zaGFyZWQvVXRpbGl0aWVzLmpzJyk7XHJcblxyXG5leHBvcnRzLmNyZWF0ZSA9ICh7XHJcblx0aWQ9MCxcclxuXHR4PTAsXHJcblx0eT0wLFxyXG5cdHdpZHRoPTUwLFxyXG5cdGhlaWdodD01MCxcclxuXHRhbmdsZT0wXHJcbn0pPT57XHJcblx0bGV0IHRvcCAgICA9IHkgLSAoaGVpZ2h0LzIpO1xyXG5cdGxldCBib3R0b20gPSB5ICsgKGhlaWdodC8yKTtcclxuXHRsZXQgbGVmdCAgID0geCAtICh3aWR0aC8yKTtcclxuXHRsZXQgcmlnaHQgID0geCArICh3aWR0aC8yKVxyXG5cdHJldHVybiB7XHJcblx0XHRpZDogaWQsXHJcblx0XHR4OiAgeCxcclxuXHRcdHk6ICB5LFxyXG5cdFx0d2lkdGg6IHdpZHRoLFxyXG5cdFx0aGVpZ2h0OmhlaWdodCxcclxuXHRcdGFuZ2xlOiBhbmdsZSxcclxuXHRcdHRvcDogICAgdG9wLFxyXG5cdFx0Ym90dG9tOiBib3R0b20sXHJcblx0XHRsZWZ0OiAgIGxlZnQsXHJcblx0XHRyaWdodDogIHJpZ2h0LFxyXG5cdFx0dG9wTGVmdDogICAgIHt4OiBsZWZ0LCB5OiB0b3B9LFxyXG5cdFx0dG9wUmlnaHQ6ICAgIHt4OiByaWdodCwgeTogdG9wfSxcclxuXHRcdGJvdHRvbUxlZnQ6ICB7eDogbGVmdCwgeTogYm90dG9tfSxcclxuXHRcdGJvdHRvbVJpZ2h0OiB7eDogcmlnaHQsIHk6IGJvdHRvbX0sXHJcblx0XHRwb2ludHM6ICAgICAgW3t4OiBsZWZ0LCB5OiB0b3B9LCB7eDogcmlnaHQsIHk6IHRvcH0sIHt4OiBsZWZ0LCB5OiBib3R0b219LCB7eDogcmlnaHQsIHk6IGJvdHRvbX1dXHJcblx0fVxyXG59IC8vY3JlYXRlXHJcblxyXG5mdW5jdGlvbiBtb3ZlVG8ob2JqLCB4LCB5KXtcclxuXHRvYmouaGl0Ym94LnggPSB4O1xyXG5cdG9iai5oaXRib3gueSA9IHk7XHJcblx0dXBkYXRlKG9iaik7XHJcbn1cclxuZXhwb3J0cy5tb3ZlVG8gPSBtb3ZlVG87XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUob2JqKXtcclxuXHRsZXQgaGl0Ym94ID0gb2JqLmhpdGJveDtcclxuXHRsZXQgdG9wICAgID0gaGl0Ym94LnkgLSAoaGl0Ym94LmhlaWdodC8yKTtcclxuXHRsZXQgYm90dG9tID0gaGl0Ym94LnkgKyAoaGl0Ym94LmhlaWdodC8yKTtcclxuXHRsZXQgbGVmdCAgID0gaGl0Ym94LnggLSAoaGl0Ym94LndpZHRoLzIpO1xyXG5cdGxldCByaWdodCAgPSBoaXRib3gueCArIChoaXRib3gud2lkdGgvMik7XHJcblxyXG5cdGhpdGJveC50b3AgICAgPSB0b3A7XHJcblx0aGl0Ym94LmJvdHRvbSA9IGJvdHRvbTtcclxuXHRoaXRib3gubGVmdCAgID0gbGVmdDtcclxuXHRoaXRib3gucmlnaHQgID0gcmlnaHQ7XHJcblx0aGl0Ym94LnRvcExlZnQgICAgID0ge3g6IGxlZnQsIHk6IHRvcH07XHJcblx0aGl0Ym94LnRvcFJpZ2h0ICAgID0ge3g6IHJpZ2h0LCB5OiB0b3B9O1xyXG5cdGhpdGJveC5ib3R0b21MZWZ0ICA9IHt4OiBsZWZ0LCB5OiBib3R0b219O1xyXG5cdGhpdGJveC5ib3R0b21SaWdodCA9IHt4OiByaWdodCwgeTogYm90dG9tfTtcclxuXHQvLyBoaXRib3gucG9pbnRzICAgICAgPSBbaGl0Ym94LnRvcExlZnQsIGhpdGJveC50b3BSaWdodCwgaGl0Ym94LmJvdHRvbUxlZnQsIGhpdGJveC5ib3R0b21SaWdodF07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFZpc3VhbFBvaW50cyh7b2JqLCB2aWV3UG9pbnQsIGdldFBvaW50c0FmdGVyRWRnZT1mYWxzZX0pe1xyXG5cclxuXHRsZXQgcmV0dXJuUG9pbnRzID0gW107XHJcblx0aWYodmlld1BvaW50LnkgPCBvYmoudG9wKXsgICAgICAgICAgICAgIC8vTlcsIE4sIE5FXHJcblx0XHRpZih2aWV3UG9pbnQueCA8IG9iai5sZWZ0KXsgICAgICAgICAvL05XXHJcblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmoudG9wTGVmdCwgb2JqLnRvcFJpZ2h0LCBvYmouYm90dG9tTGVmdF07XHJcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcclxuXHRcdFx0XHRjZW50ZXI6IHZpZXdQb2ludCxcclxuXHRcdFx0XHRwb2ludDogb2JqLmJvdHRvbUxlZnQsXHJcblx0XHRcdFx0YW5nbGU6IDAuMDF9KTtcclxuXHRcdFx0cFJvdGF0ZWRDVy5leHRlbmQgPSB0cnVlO1xyXG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENXKTtcclxuXHRcdFx0bGV0IHBSb3RhdGVkQ0NXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcclxuXHRcdFx0XHRjZW50ZXI6IHZpZXdQb2ludCxcclxuXHRcdFx0XHRwb2ludDogb2JqLnRvcFJpZ2h0LFxyXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xyXG5cdFx0XHRwUm90YXRlZENDVy5leHRlbmQgPSB0cnVlO1xyXG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENDVyk7XHJcblx0XHR9IGVsc2UgaWYodmlld1BvaW50LnggPiBvYmoucmlnaHQpeyAvL05FXHJcblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmoudG9wTGVmdCwgb2JqLnRvcFJpZ2h0LCBvYmouYm90dG9tUmlnaHRdO1xyXG5cdFx0XHRsZXQgcFJvdGF0ZWRDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XHJcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXHJcblx0XHRcdFx0cG9pbnQ6IG9iai50b3BMZWZ0LFxyXG5cdFx0XHRcdGFuZ2xlOiAwLjAxfSk7XHJcblx0XHRcdHBSb3RhdGVkQ1cuZXh0ZW5kID0gdHJ1ZTtcclxuXHRcdFx0cmV0dXJuUG9pbnRzLnB1c2gocFJvdGF0ZWRDVyk7XHJcblx0XHRcdGxldCBwUm90YXRlZENDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XHJcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXHJcblx0XHRcdFx0cG9pbnQ6IG9iai5ib3R0b21SaWdodCxcclxuXHRcdFx0XHRhbmdsZTogLTAuMDF9KTtcclxuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcclxuXHRcdFx0cmV0dXJuUG9pbnRzLnB1c2gocFJvdGF0ZWRDQ1cpO1xyXG5cdFx0fSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9OXHJcblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmoudG9wTGVmdCwgb2JqLnRvcFJpZ2h0XTtcclxuXHRcdFx0bGV0IHBSb3RhdGVkQ1cgPSBVdGlsaXRpZXMucm90YXRlUG9pbnQoe1xyXG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxyXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wTGVmdCxcclxuXHRcdFx0XHRhbmdsZTogMC4wMX0pO1xyXG5cdFx0XHRwUm90YXRlZENXLmV4dGVuZCA9IHRydWU7XHJcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ1cpO1xyXG5cdFx0XHRsZXQgcFJvdGF0ZWRDQ1cgPSBVdGlsaXRpZXMucm90YXRlUG9pbnQoe1xyXG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxyXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wUmlnaHQsXHJcblx0XHRcdFx0YW5nbGU6IC0wLjAxfSk7XHJcblx0XHRcdHBSb3RhdGVkQ0NXLmV4dGVuZCA9IHRydWU7XHJcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcclxuXHRcdH1cclxuXHJcblx0fSBlbHNlIGlmKHZpZXdQb2ludC55ID4gb2JqLmJvdHRvbSl7ICAgIC8vU1csIFMsIFNFXHJcblx0XHRpZih2aWV3UG9pbnQueCA8IG9iai5sZWZ0KXsgICAgICAgICAvL1NXXHJcblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmoudG9wTGVmdCwgb2JqLmJvdHRvbUxlZnQsIG9iai5ib3R0b21SaWdodF07XHJcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcclxuXHRcdFx0XHRjZW50ZXI6IHZpZXdQb2ludCxcclxuXHRcdFx0XHRwb2ludDogb2JqLmJvdHRvbVJpZ2h0LFxyXG5cdFx0XHRcdGFuZ2xlOiAwLjAxfSk7XHJcblx0XHRcdHBSb3RhdGVkQ1cuZXh0ZW5kID0gdHJ1ZTtcclxuXHRcdFx0cmV0dXJuUG9pbnRzLnB1c2gocFJvdGF0ZWRDVyk7XHJcblx0XHRcdGxldCBwUm90YXRlZENDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XHJcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXHJcblx0XHRcdFx0cG9pbnQ6IG9iai50b3BMZWZ0LFxyXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xyXG5cdFx0XHRwUm90YXRlZENDVy5leHRlbmQgPSB0cnVlO1xyXG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENDVyk7XHJcblx0XHR9IGVsc2UgaWYodmlld1BvaW50LnggPiBvYmoucmlnaHQpeyAvL1NFXHJcblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmoudG9wUmlnaHQsIG9iai5ib3R0b21MZWZ0LCBvYmouYm90dG9tUmlnaHRdO1xyXG5cdFx0XHRsZXQgcFJvdGF0ZWRDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XHJcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXHJcblx0XHRcdFx0cG9pbnQ6IG9iai50b3BSaWdodCxcclxuXHRcdFx0XHRhbmdsZTogMC4wMX0pO1xyXG5cdFx0XHRwUm90YXRlZENXLmV4dGVuZCA9IHRydWU7XHJcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ1cpO1xyXG5cdFx0XHRsZXQgcFJvdGF0ZWRDQ1cgPSBVdGlsaXRpZXMucm90YXRlUG9pbnQoe1xyXG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxyXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tTGVmdCxcclxuXHRcdFx0XHRhbmdsZTogLTAuMDF9KTtcclxuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcclxuXHRcdFx0cmV0dXJuUG9pbnRzLnB1c2gocFJvdGF0ZWRDQ1cpO1xyXG5cdFx0fSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TXHJcblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmouYm90dG9tTGVmdCwgb2JqLmJvdHRvbVJpZ2h0XTtcclxuXHRcdFx0bGV0IHBSb3RhdGVkQ1cgPSBVdGlsaXRpZXMucm90YXRlUG9pbnQoe1xyXG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxyXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tUmlnaHQsXHJcblx0XHRcdFx0YW5nbGU6IDAuMDF9KTtcclxuXHRcdFx0cFJvdGF0ZWRDVy5leHRlbmQgPSB0cnVlO1xyXG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENXKTtcclxuXHRcdFx0bGV0IHBSb3RhdGVkQ0NXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcclxuXHRcdFx0XHRjZW50ZXI6IHZpZXdQb2ludCxcclxuXHRcdFx0XHRwb2ludDogb2JqLmJvdHRvbUxlZnQsXHJcblx0XHRcdFx0YW5nbGU6IC0wLjAxfSk7XHJcblx0XHRcdHBSb3RhdGVkQ0NXLmV4dGVuZCA9IHRydWU7XHJcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcclxuXHRcdH1cclxuXHJcblx0fSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRSBvciBXXHJcblx0XHRpZih2aWV3UG9pbnQueCA8IG9iai5sZWZ0KXsgICAgICAgICAvL1dcclxuXHRcdFx0cmV0dXJuUG9pbnRzID0gW29iai50b3BMZWZ0LCBvYmouYm90dG9tTGVmdF07XHJcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcclxuXHRcdFx0XHRjZW50ZXI6IHZpZXdQb2ludCxcclxuXHRcdFx0XHRwb2ludDogb2JqLmJvdHRvbUxlZnQsXHJcblx0XHRcdFx0YW5nbGU6IDAuMDF9KTtcclxuXHRcdFx0cFJvdGF0ZWRDVy5leHRlbmQgPSB0cnVlO1xyXG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENXKTtcclxuXHRcdFx0bGV0IHBSb3RhdGVkQ0NXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcclxuXHRcdFx0XHRjZW50ZXI6IHZpZXdQb2ludCxcclxuXHRcdFx0XHRwb2ludDogb2JqLnRvcExlZnQsXHJcblx0XHRcdFx0YW5nbGU6IC0wLjAxfSk7XHJcblx0XHRcdHBSb3RhdGVkQ0NXLmV4dGVuZCA9IHRydWU7XHJcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcclxuXHRcdH0gZWxzZSBpZih2aWV3UG9pbnQueCA+IG9iai5yaWdodCl7IC8vRVxyXG5cdFx0XHRyZXR1cm5Qb2ludHMgPSBbb2JqLnRvcFJpZ2h0LCBvYmouYm90dG9tUmlnaHRdO1xyXG5cdFx0XHRsZXQgcFJvdGF0ZWRDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XHJcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXHJcblx0XHRcdFx0cG9pbnQ6IG9iai50b3BSaWdodCxcclxuXHRcdFx0XHRhbmdsZTogMC4wMX0pO1xyXG5cdFx0XHRwUm90YXRlZENXLmV4dGVuZCA9IHRydWU7XHJcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ1cpO1xyXG5cdFx0XHRsZXQgcFJvdGF0ZWRDQ1cgPSBVdGlsaXRpZXMucm90YXRlUG9pbnQoe1xyXG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxyXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tUmlnaHQsXHJcblx0XHRcdFx0YW5nbGU6IC0wLjAxfSk7XHJcblx0XHRcdHBSb3RhdGVkQ0NXLmV4dGVuZCA9IHRydWU7XHJcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiQ2F0Y2ggaW4gZ2V0VmlzdWFsUG9pbnRzLCBwb3NzaWJseSB2aWV3UG9pbnQgaXMgaW5zaWRlIHRoZSBib3hcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpZihyZXR1cm5Qb2ludHMubGVuZ3RoIDwgNCB8fCByZXR1cm5Qb2ludHMubGVuZ3RoID4gNSkgY29uc29sZS5sb2coXCJXcm9uZyBhbW91bnQgb2YgcG9pbnRzOlwiLCByZXR1cm5Qb2ludHMubGVuZ3RoKTtcclxuXHJcblx0cmV0dXJuIHJldHVyblBvaW50cztcclxuXHJcbn1cclxuZXhwb3J0cy5nZXRWaXN1YWxQb2ludHMgPSBnZXRWaXN1YWxQb2ludHM7XHJcblxyXG5mdW5jdGlvbiBjb2xsaWRpbmcob2JqMSwgb2JqMikge1xyXG5cdC8vZG9lc250IHRha2UgYW5nbGUgaW50byBhY2NvdW50IHlldC5cclxuXHRsZXQgaGl0Ym94MSA9IG9iajEuaGl0Ym94O1xyXG5cdGxldCBoaXRib3gyID0gb2JqMi5oaXRib3g7XHJcblxyXG5cdGxldCByb3VnaENvbGxpZGluZyA9IGZhbHNlO1xyXG5cdC8vIGNvbnNvbGUubG9nKFwiSW4gY29sbGlkaW5nOlwiLCBoaXRib3gxLCBoaXRib3gyKTtcclxuXHRpZihoaXRib3gxLnRvcCA+IGhpdGJveDIuYm90dG9tIHx8XHJcblx0ICAgaGl0Ym94MS5ib3R0b20gPCBoaXRib3gyLnRvcCB8fFxyXG5cdCAgIGhpdGJveDEucmlnaHQgPCBoaXRib3gyLmxlZnQgfHxcclxuXHQgICBoaXRib3gxLmxlZnQgPiBoaXRib3gyLnJpZ2h0KSB7XHJcblx0XHRyb3VnaENvbGxpZGluZyA9IGZhbHNlO1xyXG5cdH0gZWxzZSByb3VnaENvbGxpZGluZyA9IHRydWU7XHJcblxyXG5cdC8vIGlmKHJvdWdoQ29sbGlkaW5nKXtcclxuXHQvLyBcdC8vVE9ETyBtYWtlIG1vcmUgZ3JhbnVsYXIgY29sbGlkaW5nIHdpdGggY29sbGlzaW9uIHBvaW50cyBhbmQgc3VjaFxyXG5cdC8vIH1cclxuXHRcclxuXHRyZXR1cm4gcm91Z2hDb2xsaWRpbmc7XHJcbn0gLy9jb2xsaWRpbmdcclxuZXhwb3J0cy5jb2xsaWRpbmcgPSBjb2xsaWRpbmc7XHJcblxyXG5mdW5jdGlvbiBjb2xsaWRlTGluZUxpbmUobGluZTEsIGxpbmUyKSB7XHJcblxyXG5cdC8vIGNhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgdG8gaW50ZXJzZWN0aW9uIHBvaW50XHJcblx0dmFyIHVBID0gKChsaW5lMi54Mi1saW5lMi54MSkqKGxpbmUxLnkxLWxpbmUyLnkxKSAtIFxyXG5cdFx0XHQgKGxpbmUyLnkyLWxpbmUyLnkxKSoobGluZTEueDEtbGluZTIueDEpKSAvIFxyXG5cdFx0XHQgKChsaW5lMi55Mi1saW5lMi55MSkqKGxpbmUxLngyLWxpbmUxLngxKSAtIFxyXG5cdFx0XHQgKGxpbmUyLngyLWxpbmUyLngxKSoobGluZTEueTItbGluZTEueTEpKTtcclxuXHR2YXIgdUIgPSAoKGxpbmUxLngyLWxpbmUxLngxKSoobGluZTEueTEtbGluZTIueTEpIC0gXHJcblx0XHRcdCAobGluZTEueTItbGluZTEueTEpKihsaW5lMS54MS1saW5lMi54MSkpIC8gXHJcblx0XHRcdCAoKGxpbmUyLnkyLWxpbmUyLnkxKSoobGluZTEueDItbGluZTEueDEpIC0gXHJcblx0XHRcdCAobGluZTIueDItbGluZTIueDEpKihsaW5lMS55Mi1saW5lMS55MSkpO1xyXG5cclxuXHQvLyBpZiB1QSBhbmQgdUIgYXJlIGJldHdlZW4gMC0xLCBsaW5lcyBhcmUgY29sbGlkaW5nXHJcblx0aWYgKHVBID49IDAgJiYgdUEgPD0gMSAmJiB1QiA+PSAwICYmIHVCIDw9IDEpIHtcclxuXHJcblx0ICB2YXIgaW50ZXJzZWN0aW9uWCA9IGxpbmUxLngxICsgKHVBICogKGxpbmUxLngyLWxpbmUxLngxKSk7XHJcblx0ICB2YXIgaW50ZXJzZWN0aW9uWSA9IGxpbmUxLnkxICsgKHVBICogKGxpbmUxLnkyLWxpbmUxLnkxKSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIFwieFwiOmludGVyc2VjdGlvblgsXHJcbiAgICAgICAgXCJ5XCI6aW50ZXJzZWN0aW9uWVxyXG4gICAgICB9O1xyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuZXhwb3J0cy5jb2xsaWRlTGluZUxpbmUgPSBjb2xsaWRlTGluZUxpbmU7XHJcblxyXG5mdW5jdGlvbiBjb2xsaWRlTGluZVJlY3QobGluZSwgcmVjKSB7Ly94MSwgeTEsIHgyLCB5MiwgICByeCwgcnksIHJ3LCByaFxyXG5cclxuICAvL2NoZWNrIGlmIHRoZSBsaW5lIGhhcyBoaXQgYW55IG9mIHRoZSByZWN0YW5nbGUncyBzaWRlcy4gdXNlcyB0aGUgY29sbGlkZUxpbmVMaW5lIGZ1bmN0aW9uIGFib3ZlXHJcblxyXG5cdGxldCBsZWZ0ID0gICB0aGlzLmNvbGxpZGVMaW5lTGluZSh4MSx5MSx4Mix5MiwgcngscnkscngsIHJ5K3JoKTtcclxuXHRsZXQgcmlnaHQgPSAgdGhpcy5jb2xsaWRlTGluZUxpbmUoeDEseTEseDIseTIsIHJ4K3J3LHJ5LCByeCtydyxyeStyaCk7XHJcblx0bGV0IHRvcCA9ICAgIHRoaXMuY29sbGlkZUxpbmVMaW5lKHgxLHkxLHgyLHkyLCByeCxyeSwgcngrcncscnkpO1xyXG5cdGxldCBib3R0b20gPSB0aGlzLmNvbGxpZGVMaW5lTGluZSh4MSx5MSx4Mix5MiwgcngscnkrcmgsIHJ4K3J3LHJ5K3JoKTtcclxuXHRsZXQgaW50ZXJzZWN0aW9uID0ge1xyXG5cdFx0XCJsZWZ0XCIgOiBsZWZ0LFxyXG5cdFx0XCJyaWdodFwiIDogcmlnaHQsXHJcblx0XHRcInRvcFwiIDogdG9wLFxyXG5cdFx0XCJib3R0b21cIiA6IGJvdHRvbVxyXG5cdH1cclxuXHJcbiAgLy9pZiBBTlkgb2YgdGhlIGFib3ZlIGFyZSB0cnVlLCB0aGUgbGluZSBoYXMgaGl0IHRoZSByZWN0YW5nbGVcclxuICBpZiAobGVmdCB8fCByaWdodCB8fCB0b3AgfHwgYm90dG9tKSB7XHJcbiAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5leHBvcnRzLmNvbGxpZGVMaW5lUmVjdCA9IGNvbGxpZGVMaW5lUmVjdDsiLCJleHBvcnRzLmVycm9yID0gKHN0cmluZyk9PntcclxuXHRuZXcgRXJyb3Ioc3RyaW5nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmFuZG9tQ29sb3IoKXtcclxuXHRyZXR1cm4ge1xyXG5cdFx0cjogTWF0aC5mbG9vcigyNTUqTWF0aC5yYW5kb20oKSksXHJcblx0XHRnOiBNYXRoLmZsb29yKDI1NSpNYXRoLnJhbmRvbSgpKSxcclxuXHRcdGI6IE1hdGguZmxvb3IoMjU1Kk1hdGgucmFuZG9tKCkpXHJcblx0fVxyXG59XHJcbmV4cG9ydHMucmFuZG9tQ29sb3IgPSByYW5kb21Db2xvcjtcclxuXHJcbmV4cG9ydHMubWlkUG9pbnQgPSAocG9pbnQxLCBwb2ludDIpPT57XHJcbiAgICBsZXQgbWlkZGxlWCA9IHBvaW50Mi54IC0gKChwb2ludDIueC1wb2ludDIueCkvMik7XHJcbiAgICBsZXQgbWlkZGxlWSA9IHBvaW50Mi55IC0gKChwb2ludDIueS1wb2ludDEueSkvMik7XHJcbiAgIHJldHVybiB7eDogbWlkZGxlWCwgeTogbWlkZGxlWX07XHJcbn1cclxuXHJcbmV4cG9ydHMucm90YXRlUG9pbnQgPSAoe2NlbnRlcj17eDowLCB5OjB9LCBwb2ludD17eDowLCB5OjB9LCBhbmdsZT0wfSk9PntcclxuICAgICAgICBsZXQgcyA9IE1hdGguc2luKGFuZ2xlKTtcclxuICAgICAgICBsZXQgYyA9IE1hdGguY29zKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgLy9tYWtlIGNvcHlcclxuICAgICAgICBsZXQgbmV3UG9pbnQgPSB7eDogcG9pbnQueCwgeTogcG9pbnQueX07IFxyXG5cclxuICAgICAgICAvLyB0cmFuc2xhdGUgcG9pbnQgYmFjayB0byBvcmlnaW46XHJcbiAgICAgICAgbmV3UG9pbnQueCAtPSBjZW50ZXIueDtcclxuICAgICAgICBuZXdQb2ludC55IC09IGNlbnRlci55O1xyXG5cclxuICAgICAgICAvLyByb3RhdGUgcG9pbnRcclxuICAgICAgICBsZXQgeG5ldyA9IG5ld1BvaW50LnggKiBjIC0gbmV3UG9pbnQueSAqIHM7XHJcbiAgICAgICAgbGV0IHluZXcgPSBuZXdQb2ludC54ICogcyArIG5ld1BvaW50LnkgKiBjO1xyXG5cclxuICAgICAgICAvLyB0cmFuc2xhdGUgcG9pbnQgYmFjazpcclxuICAgICAgICBuZXdQb2ludC54ID0geG5ldyArIGNlbnRlci54O1xyXG4gICAgICAgIG5ld1BvaW50LnkgPSB5bmV3ICsgY2VudGVyLnk7XHJcbiAgICAgICAgcmV0dXJuIG5ld1BvaW50O1xyXG4gICAgfVxyXG5cclxuZXhwb3J0cy5leHRlbmRFbmRQb2ludCA9ICh7c3RhcnRQb2ludCwgZW5kUG9pbnQsIGxlbmd0aH0pPT57XHJcbiAgICBsZXQgY3VycmVudGxlbmd0aCA9IE1hdGguc3FydChcclxuICAgICAgICBNYXRoLnBvdyhzdGFydFBvaW50LnggLSBlbmRQb2ludC54LCAyLjApICsgXHJcbiAgICAgICAgTWF0aC5wb3coc3RhcnRQb2ludC55IC0gZW5kUG9pbnQueSwgMi4wKVxyXG4gICAgICAgICk7XHJcbiAgICBsZXQgYW1vdW50ID0gbGVuZ3RoIC0gY3VycmVudGxlbmd0aDtcclxuICAgIGxldCBuZXdFbmRQb2ludCA9IHtcclxuICAgICAgICB4OiBlbmRQb2ludC54ICsgKChlbmRQb2ludC54IC0gc3RhcnRQb2ludC54KSAvIGN1cnJlbnRsZW5ndGggKiBhbW91bnQpLFxyXG4gICAgICAgIHk6IGVuZFBvaW50LnkgKyAoKGVuZFBvaW50LnkgLSBzdGFydFBvaW50LnkpIC8gY3VycmVudGxlbmd0aCAqIGFtb3VudClcclxuICAgIH07XHJcbiAgICByZXR1cm4gbmV3RW5kUG9pbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc3QocG9pbnQxLCBwb2ludDIpe1xyXG4gICAgbGV0IGRpZmZYID0gTWF0aC5hYnMocG9pbnQxLnggLSBwb2ludDIueCk7XHJcbiAgICBsZXQgZGlmZlkgPSBNYXRoLmFicyhwb2ludDEueSAtIHBvaW50Mi55KTtcclxuICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydCgoTWF0aC5wb3coZGlmZlgsIDIpICsgTWF0aC5wb3coZGlmZlksMikpLCAyKTtcclxuICAgIHJldHVybiBkaXN0YW5jZTtcclxufVxyXG5leHBvcnRzLmRpc3QgPSBkaXN0O1xyXG5cclxuZXhwb3J0cy5jYWxjdWxhdGVBbmdsZSA9ICh7cG9pbnQxLCBwb2ludDIsIGNlbnRlclBvaW50PXt4OjAseTowfX0pPT57XHJcbiAgICBpZihwb2ludDEueCA9PT0gcG9pbnQyLnggJiYgcG9pbnQxLnkgPT09IHBvaW50Mi55KSByZXR1cm4gMDtcclxuXHJcbiAgICBsZXQgcDFUcmFucyA9IHt4OiBwb2ludDEueCAtIGNlbnRlclBvaW50LngsIHk6IHBvaW50MS55IC0gY2VudGVyUG9pbnQueX07XHJcbiAgICBsZXQgcDJUcmFucyA9IHt4OiBwb2ludDIueCAtIGNlbnRlclBvaW50LngsIHk6IHBvaW50Mi55IC0gY2VudGVyUG9pbnQueX07XHJcbiAgICAvLyBsZXQgZGlmZlggICA9IHAxVHJhbnMueCAtIHAyVHJhbnMueDtcclxuICAgIC8vIGxldCBkaWZmWSAgID0gcDFUcmFucy55IC0gcDJUcmFucy55O1xyXG4gICAgLy8gdmFyIGFuZ2xlUmFkaWFucyA9IE1hdGguYXRhbjIoZGlmZlksIGRpZmZYKTtcclxuICAgIGxldCBhbmdsZU9mUDEgPSBNYXRoLmF0YW4yKHAxVHJhbnMueSwgcDFUcmFucy54KTtcclxuICAgIGxldCBhbmdsZU9mUDIgPSBNYXRoLmF0YW4yKHAyVHJhbnMueSwgcDJUcmFucy54KTtcclxuICAgIGlmKGFuZ2xlT2ZQMSA8IDApIGFuZ2xlT2ZQMSA9IGFuZ2xlT2ZQMSArIE1hdGguUEkqMjtcclxuICAgIGlmKGFuZ2xlT2ZQMiA8IDApIGFuZ2xlT2ZQMiA9IGFuZ2xlT2ZQMiArIE1hdGguUEkqMjtcclxuICAgIGxldCBhbmdsZVJhZGlhbnMgPSBhbmdsZU9mUDIgLSBhbmdsZU9mUDE7XHJcbiAgICAvLyBpZihhbmdsZVJhZGlhbnMgPCAwKSBhbmdsZVJhZGlhbnMgPSAoYW5nbGVSYWRpYW5zICsgTWF0aC5QSSoyKTtcclxuICAgIHJldHVybiBhbmdsZVJhZGlhbnM7XHJcbiAgICAvLyBsZXQgYW5nbGVPZlAxID0gTWF0aC5hdGFuMihwMVRyYW5zLngsIHAxVHJhbnMueSk7XHJcbiAgICAvLyBsZXQgYW5nbGVPZlAyID0gTWF0aC5hdGFuMihwb2ludDIueSAtIGNlbnRlclBvaW50LnksIHBvaW50Mi54IC0gY2VudGVyUG9pbnQueCk7XHJcbiAgICAvLyBpZihhbmdsZU9mUDEgPCAwKSBhbmdsZU9mUDEgPSBhbmdsZU9mUDEgKyBNYXRoLlBJKjI7XHJcbiAgICAvLyBpZihhbmdsZU9mUDIgPCAwKSBhbmdsZU9mUDIgPSBhbmdsZU9mUDIgKyBNYXRoLlBJKjI7XHJcbiAgICAvL2FuZ2xlIGluIHJhZGlhbnNcclxuICAgIC8vIHJldHVybiAgYW5nbGVPZlAyIC0gYW5nbGVPZlAxO1xyXG59XHJcblxyXG5leHBvcnRzLm1hcE51bSA9ICh7aW5wdXQsIHN0YXJ0MSwgZW5kMSwgc3RhcnQyLCBlbmQyIH0pPT57XHJcbiAgICBpZihpbnB1dDxzdGFydDEpIGlucHV0ID0gc3RhcnQxO1xyXG4gICAgZWxzZSBpZihpbnB1dD5lbmQxKSBpbnB1dCA9IGVuZDE7XHJcbiAgICBsZXQgZGlmZlJhbmdlMSA9IGVuZDEgLSBzdGFydDE7XHJcbiAgICBsZXQgZnJhY3Rpb25PZkZpcnN0UmFuZ2UgPSAoaW5wdXQgLSBzdGFydDEpIC8gZGlmZlJhbmdlMTtcclxuICAgIGxldCBkaWZmUmFuZ2UyID0gZW5kMiAtIHN0YXJ0MjtcclxuICAgIHJldHVybiAoZGlmZlJhbmdlMipmcmFjdGlvbk9mRmlyc3RSYW5nZSkgKyBzdGFydDI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb25lT2JqZWN0KG9iail7XHJcblx0Ly9tYWtlIGEgbmV3IG9iamVjdCB0byByZXR1cm5cclxuXHRsZXQgbmV3T2JqID0ge307XHJcblx0Ly9jb3B5IGFsbCBwcm9wZXJ0aWVzIG9udG8gbmV3b2JqZWN0XHJcblx0Zm9yKHZhciBpZCBpbiBvYmope1xyXG5cdFx0bGV0IHByb3BlcnkgPSBvYmpbaWRdO1xyXG5cdFx0aWYodHlwZW9mIHByb3BlcnkgPT09ICdvYmplY3QnICYmIHByb3BlcnkgIT09IG51bGwpe1xyXG5cdFx0XHRuZXdPYmpbaWRdID0gY2xvbmVPYmplY3QocHJvcGVyeSk7XHJcblx0XHR9XHJcblx0XHRpZihwcm9wZXJ5ICE9PSBudWxsKXtcclxuXHRcdFx0bmV3T2JqW2lkXSA9IHByb3Blcnk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBuZXdPYmo7XHJcbn1cclxuZXhwb3J0cy5jbG9uZU9iamVjdCA9IGNsb25lT2JqZWN0O1xyXG5cclxuZnVuY3Rpb24gbWVtb3J5U2l6ZU9mKG9iaikge1xyXG4gICAgdmFyIGJ5dGVzID0gMDtcclxuXHJcbiAgICBmdW5jdGlvbiBzaXplT2Yob2JqKSB7XHJcbiAgICAgICAgaWYob2JqICE9PSBudWxsICYmIG9iaiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCh0eXBlb2Ygb2JqKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XHJcbiAgICAgICAgICAgICAgICBieXRlcyArPSA4O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgICAgICAgICBieXRlcyArPSBvYmoubGVuZ3RoICogMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib29sZWFuJzpcclxuICAgICAgICAgICAgICAgIGJ5dGVzICs9IDQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICAgICAgICAgIHZhciBvYmpDbGFzcyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopLnNsaWNlKDgsIC0xKTtcclxuICAgICAgICAgICAgICAgIGlmKG9iakNsYXNzID09PSAnT2JqZWN0JyB8fCBvYmpDbGFzcyA9PT0gJ0FycmF5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighb2JqLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplT2Yob2JqW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBieXRlcyArPSBvYmoudG9TdHJpbmcoKS5sZW5ndGggKiAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVzO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBmb3JtYXRCeXRlU2l6ZShieXRlcykge1xyXG4gICAgICAgIGlmKGJ5dGVzIDwgMTAyNCkgcmV0dXJuIGJ5dGVzICsgXCIgYnl0ZXNcIjtcclxuICAgICAgICBlbHNlIGlmKGJ5dGVzIDwgMTA0ODU3NikgcmV0dXJuKGJ5dGVzIC8gMTAyNCkudG9GaXhlZCgzKSArIFwiIEtpQlwiO1xyXG4gICAgICAgIGVsc2UgaWYoYnl0ZXMgPCAxMDczNzQxODI0KSByZXR1cm4oYnl0ZXMgLyAxMDQ4NTc2KS50b0ZpeGVkKDMpICsgXCIgTWlCXCI7XHJcbiAgICAgICAgZWxzZSByZXR1cm4oYnl0ZXMgLyAxMDczNzQxODI0KS50b0ZpeGVkKDMpICsgXCIgR2lCXCI7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBmb3JtYXRCeXRlU2l6ZShzaXplT2Yob2JqKSk7XHJcbn07IC8vbWVtb3J5U2l6ZU9mIFxyXG5leHBvcnRzLm1lbW9yeVNpemVPZiA9IG1lbW9yeVNpemVPZjsiXSwic291cmNlUm9vdCI6IiJ9