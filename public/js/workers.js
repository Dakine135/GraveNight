!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s="./clientSource/js/lineOfSight.worker.js")}({"./clientSource/js/lineOfSight.worker.js":
/*!***********************************************!*\
  !*** ./clientSource/js/lineOfSight.worker.js ***!
  \***********************************************/
/*! no static exports found */function(t,e,o){const n=o(/*! ../../shared/Utilities.js */"./shared/Utilities.js"),i=o(/*! ../../shared/Hitbox.js */"./shared/Hitbox.js");function r({objects:t,origin:e,point:o,distance:i=1/0}){let r=!1,x=null,y=1/0,c=null;for(var h in t){let i=t[h],l=a(i.hitbox,{x1:e.x,y1:e.y,x2:o.x,y2:o.y});if(l){let t=n.dist(l.point,e);y>t&&(c=i,y=t,r=l.point,x=l.line)}}if(r&&y<i){let t,o,n={x:x.x1,y:x.y1},i={x:x.x2,y:x.y2},a=l({point1:n,centerPoint:e}),h=l({point1:i,centerPoint:e}),s=l({point1:r,centerPoint:e});return a>h?((t=n).angle=a,(o=i).angle=h):((t=i).angle=h,(o=n).angle=a),r.angle=s,{collision:!0,point:r,dist:y,cwPoint:t,ccwPoint:o,object:c}}return{collision:!1,point:o}}function l({point1:t,point2:e=null,centerPoint:o}){null==e&&(e={x:o.x+10,y:o.y});let i=n.calculateAngle({point1:t,point2:e,centerPoint:o});return i<0&&(i=Math.abs(i)),i}function a(t,e){let o={x1:t.topLeft.x,y1:t.topLeft.y,x2:t.topRight.x,y2:t.topRight.y},r={x1:t.topRight.x,y1:t.topRight.y,x2:t.bottomRight.x,y2:t.bottomRight.y},l={x1:t.bottomRight.x,y1:t.bottomRight.y,x2:t.bottomLeft.x,y2:t.bottomLeft.y},a={x1:t.bottomLeft.x,y1:t.bottomLeft.y,x2:t.topLeft.x,y2:t.topLeft.y},x=!1,y=null,c=1/0,h=i.collideLineLine(e,o);h&&(x=h,y=o,c=n.dist(h,{x:e.x1,y:e.y1}));let s=i.collideLineLine(e,r);if(s){let t=n.dist(s,{x:e.x1,y:e.y1});t<c&&(x=s,y=r,c=t)}let p=i.collideLineLine(e,l);if(p){let t=n.dist(p,{x:e.x1,y:e.y1});t<c&&(x=p,y=l,c=t)}let u=i.collideLineLine(e,a);if(u){let t=n.dist(u,{x:e.x1,y:e.y1});t<c&&(x=u,y=a,c=t)}return{point:x,line:y}}function x({point:t,edge:e=!1,color:o="yellow",name:n="No Name",origin:i,camera:r}){let a=l({point1:t,centerPoint:i}),x=function({camera:t,point:e}){let o=t.x-t.width/2,n=t.y-t.height/2,i=Math.round(e.x-o),r=Math.round(e.y-n);return{x:i,y:r}}({camera:r,point:t});return x.edge=e,x.color=o,x.angle=a,x.name=n,x.count=this.orderPointsCreated,this.orderPointsCreated++,x}console.log("Worker created"),onmessage=function(t){let e=t.data,o=function({objectsInRange:t={},origin:e=null,renderDistance:o=500,camera:l=null}){let a=[];for(var y in t){let c=t[y],h=i.getVisualPoints({obj:c.hitbox,viewPoint:e,getPointsAfterEdge:!0});h.forEach(function(i){let y=i;i.extend&&(y=n.extendEndPoint({startPoint:e,endPoint:i,length:o}));let c=r({objects:t,origin:e,point:y}),h=x({point:c.point,edge:!c.collision,color:c.collision?"green":"yellow",name:"P",origin:e,camera:l});a.push(h)})}return a}({objectsInRange:e.objectsInRange,origin:e.origin,renderDistance:e.renderDistance,camera:e.camera});postMessage(o)}},"./shared/Hitbox.js":
/*!**************************!*\
  !*** ./shared/Hitbox.js ***!
  \**************************/
/*! no static exports found */function(t,e,o){var n=o(/*! ../shared/Utilities.js */"./shared/Utilities.js");e.create=({id:t=0,x:e=0,y:o=0,width:n=50,height:i=50,angle:r=0})=>{let l=o-i/2,a=o+i/2,x=e-n/2,y=e+n/2;return{id:t,x:e,y:o,width:n,height:i,angle:r,top:l,bottom:a,left:x,right:y,topLeft:{x:x,y:l},topRight:{x:y,y:l},bottomLeft:{x:x,y:a},bottomRight:{x:y,y:a},points:[{x:x,y:l},{x:y,y:l},{x:x,y:a},{x:y,y:a}]}},e.moveTo=function(t,e,o){t.hitbox.x=e,t.hitbox.y=o,function(t){let e=t.hitbox,o=e.y-e.height/2,n=e.y+e.height/2,i=e.x-e.width/2,r=e.x+e.width/2;e.top=o,e.bottom=n,e.left=i,e.right=r,e.topLeft={x:i,y:o},e.topRight={x:r,y:o},e.bottomLeft={x:i,y:n},e.bottomRight={x:r,y:n}}(t)},e.getVisualPoints=function({obj:t,viewPoint:e,getPointsAfterEdge:o=!1}){let i=[];if(e.y<t.top)if(e.x<t.left){i=[t.topLeft,t.topRight,t.bottomLeft];let o=n.rotatePoint({center:e,point:t.bottomLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topRight,angle:-.01});r.extend=!0,i.push(r)}else if(e.x>t.right){i=[t.topLeft,t.topRight,t.bottomRight];let o=n.rotatePoint({center:e,point:t.topLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomRight,angle:-.01});r.extend=!0,i.push(r)}else{i=[t.topLeft,t.topRight];let o=n.rotatePoint({center:e,point:t.topLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topRight,angle:-.01});r.extend=!0,i.push(r)}else if(e.y>t.bottom)if(e.x<t.left){i=[t.topLeft,t.bottomLeft,t.bottomRight];let o=n.rotatePoint({center:e,point:t.bottomRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topLeft,angle:-.01});r.extend=!0,i.push(r)}else if(e.x>t.right){i=[t.topRight,t.bottomLeft,t.bottomRight];let o=n.rotatePoint({center:e,point:t.topRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomLeft,angle:-.01});r.extend=!0,i.push(r)}else{i=[t.bottomLeft,t.bottomRight];let o=n.rotatePoint({center:e,point:t.bottomRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomLeft,angle:-.01});r.extend=!0,i.push(r)}else if(e.x<t.left){i=[t.topLeft,t.bottomLeft];let o=n.rotatePoint({center:e,point:t.bottomLeft,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.topLeft,angle:-.01});r.extend=!0,i.push(r)}else if(e.x>t.right){i=[t.topRight,t.bottomRight];let o=n.rotatePoint({center:e,point:t.topRight,angle:.01});o.extend=!0,i.push(o);let r=n.rotatePoint({center:e,point:t.bottomRight,angle:-.01});r.extend=!0,i.push(r)}else console.log("Catch in getVisualPoints, possibly viewPoint is inside the box");return(i.length<4||i.length>5)&&console.log("Wrong amount of points:",i.length),i},e.colliding=function(t,e){let o=t.hitbox,n=e.hitbox,i=!1;return i=!(o.top>n.bottom||o.bottom<n.top||o.right<n.left||o.left>n.right)},e.collideLineLine=function(t,e){var o=((e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1))/((e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1)),n=((t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1))/((e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1));return o>=0&&o<=1&&n>=0&&n<=1&&{x:t.x1+o*(t.x2-t.x1),y:t.y1+o*(t.y2-t.y1)}},e.collideLineRect=function(t,e){let o=this.collideLineLine(x1,y1,x2,y2,rx,ry,rx,ry+rh),n=this.collideLineLine(x1,y1,x2,y2,rx+rw,ry,rx+rw,ry+rh),i=this.collideLineLine(x1,y1,x2,y2,rx,ry,rx+rw,ry),r=this.collideLineLine(x1,y1,x2,y2,rx,ry+rh,rx+rw,ry+rh);return!!(o||n||i||r)&&{left:o,right:n,top:i,bottom:r}}},"./shared/Utilities.js":
/*!*****************************!*\
  !*** ./shared/Utilities.js ***!
  \*****************************/
/*! no static exports found */function(t,e){e.error=t=>{new Error(t)},e.randomColor=function(){return{r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random())}},e.midPoint=(t,e)=>{return{x:e.x-(e.x-e.x)/2,y:e.y-(e.y-t.y)/2}},e.rotatePoint=({center:t={x:0,y:0},point:e={x:0,y:0},angle:o=0})=>{let n=Math.sin(o),i=Math.cos(o),r={x:e.x,y:e.y};r.x-=t.x,r.y-=t.y;let l=r.x*i-r.y*n,a=r.x*n+r.y*i;return r.x=l+t.x,r.y=a+t.y,r},e.extendEndPoint=({startPoint:t,endPoint:e,length:o})=>{let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),i=o-n;return{x:e.x+(e.x-t.x)/n*i,y:e.y+(e.y-t.y)/n*i}},e.dist=function(t,e){let o=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.sqrt(Math.pow(o,2)+Math.pow(n,2),2)},e.calculateAngle=({point1:t,point2:e,centerPoint:o={x:0,y:0}})=>{if(t.x===e.x&&t.y===e.y)return 0;let n={x:t.x-o.x,y:t.y-o.y},i={x:e.x-o.x,y:e.y-o.y},r=Math.atan2(n.y,n.x),l=Math.atan2(i.y,i.x);return r<0&&(r+=2*Math.PI),l<0&&(l+=2*Math.PI),l-r},e.mapNum=({input:t,start1:e,end1:o,start2:n,end2:i})=>{return t<e?t=e:t>o&&(t=o),(i-n)*((t-e)/(o-e))+n},e.cloneObject=function t(e){let o={};for(var n in e){let i=e[n];"object"==typeof i&&null!==i&&(o[n]=t(i)),null!==i&&(o[n]=i)}return o},e.memorySizeOf=function(t){var e=0;return function(t){return t<1024?t+" bytes":t<1048576?(t/1024).toFixed(3)+" KiB":t<1073741824?(t/1048576).toFixed(3)+" MiB":(t/1073741824).toFixed(3)+" GiB"}(function t(o){if(null!=o)switch(typeof o){case"number":e+=8;break;case"string":e+=2*o.length;break;case"boolean":e+=4;break;case"object":var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n||"Array"===n)for(var i in o)o.hasOwnProperty(i)&&t(o[i]);else e+=2*o.toString().length}return e}(t))}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50U291cmNlL2pzL2xpbmVPZlNpZ2h0Lndvcmtlci5qcyIsIndlYnBhY2s6Ly8vLi9zaGFyZWQvSGl0Ym94LmpzIiwid2VicGFjazovLy8uL3NoYXJlZC9VdGlsaXRpZXMuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJVdGlsaXRpZXMiLCJIaXRib3giLCJnZXRDb2xsaXNpb24iLCJvYmplY3RzIiwib3JpZ2luIiwicG9pbnQiLCJkaXN0YW5jZSIsIkluZmluaXR5IiwiY2xvc2VzdENvbGxpc2lvbiIsImNsb3Nlc3RTZWdtZW50IiwiY2xvc2VzdERpc3QiLCJjbG9zZXN0T2JqIiwiaWQiLCJjb2xsaXNpb24iLCJnZXRJbnRlcnNlY3Rpb24iLCJoaXRib3giLCJ4MSIsIngiLCJ5MSIsInkiLCJ4MiIsInkyIiwiZGlzdCIsImxpbmUiLCJjd1BvaW50IiwiY2N3UG9pbnQiLCJwb2ludDEiLCJwb2ludDIiLCJhbmdsZUNvbGxpc2lvblRvUG9pbnQxIiwiY2FsY3VsYXRlQW5nbGUiLCJjZW50ZXJQb2ludCIsImFuZ2xlQ29sbGlzaW9uVG9Qb2ludDIiLCJhbmdsZUNvbGxpc2lvbiIsImFuZ2xlIiwicEFuZ2xlIiwiTWF0aCIsImFicyIsImNvcm5lcnMiLCJib3hMaW5lVG9wIiwidG9wTGVmdCIsInRvcFJpZ2h0IiwiYm94TGluZVJpZ2h0IiwiYm90dG9tUmlnaHQiLCJib3hMaW5lQm90dG9tIiwiYm90dG9tTGVmdCIsImJveExpbmVMZWZ0IiwiaW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0aW5nU2VnbWVudCIsInRvcCIsImNvbGxpZGVMaW5lTGluZSIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsImdldFZpZXdQb2ludCIsImVkZ2UiLCJjb2xvciIsImNhbWVyYSIsInZpZXdQb2ludCIsIm9yZ2lnaW5YIiwid2lkdGgiLCJvcmdpZ2luWSIsImhlaWdodCIsInR4Iiwicm91bmQiLCJ0eSIsInRyYW5zbGF0ZUNhbWVyYSIsImNvdW50IiwidGhpcyIsIm9yZGVyUG9pbnRzQ3JlYXRlZCIsImNvbnNvbGUiLCJsb2ciLCJvbm1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJwb2ludHNUb1NlbmQiLCJvYmplY3RzSW5SYW5nZSIsInJlbmRlckRpc3RhbmNlIiwibGlzdE9mUG9pbnRzIiwicG9pbnRzIiwiZ2V0VmlzdWFsUG9pbnRzIiwib2JqIiwiZ2V0UG9pbnRzQWZ0ZXJFZGdlIiwiZm9yRWFjaCIsInBvaW50VG9DaGVjayIsImV4dGVuZCIsImV4dGVuZEVuZFBvaW50Iiwic3RhcnRQb2ludCIsImVuZFBvaW50IiwibGVuZ3RoIiwicHVzaCIsImdldFBvaW50cyIsInBvc3RNZXNzYWdlIiwibW92ZVRvIiwidXBkYXRlIiwicmV0dXJuUG9pbnRzIiwicFJvdGF0ZWRDVyIsInJvdGF0ZVBvaW50IiwiY2VudGVyIiwicFJvdGF0ZWRDQ1ciLCJjb2xsaWRpbmciLCJvYmoxIiwib2JqMiIsImhpdGJveDEiLCJoaXRib3gyIiwicm91Z2hDb2xsaWRpbmciLCJsaW5lMSIsImxpbmUyIiwidUEiLCJ1QiIsImNvbGxpZGVMaW5lUmVjdCIsInJlYyIsInJ4IiwicnkiLCJyaCIsInJ3IiwiZXJyb3IiLCJzdHJpbmciLCJFcnJvciIsInJhbmRvbUNvbG9yIiwiZmxvb3IiLCJyYW5kb20iLCJnIiwiYiIsIm1pZFBvaW50Iiwic2luIiwiY29zIiwibmV3UG9pbnQiLCJ4bmV3IiwieW5ldyIsImN1cnJlbnRsZW5ndGgiLCJzcXJ0IiwicG93IiwiYW1vdW50IiwiZGlmZlgiLCJkaWZmWSIsInAxVHJhbnMiLCJwMlRyYW5zIiwiYW5nbGVPZlAxIiwiYXRhbjIiLCJhbmdsZU9mUDIiLCJQSSIsIm1hcE51bSIsImlucHV0Iiwic3RhcnQxIiwiZW5kMSIsInN0YXJ0MiIsImVuZDIiLCJjbG9uZU9iamVjdCIsIm5ld09iaiIsInByb3BlcnkiLCJtZW1vcnlTaXplT2YiLCJieXRlcyIsInRvRml4ZWQiLCJmb3JtYXRCeXRlU2l6ZSIsInNpemVPZiIsIm9iakNsYXNzIiwidG9TdHJpbmciLCJzbGljZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxHQUlBbEMsSUFBQW1DLEVBQUE7Ozs7OENDbEZBLE1BQUFDLEVBQWtCcEMsa0NBQVEseUJBQzFCcUMsRUFBZXJDLCtCQUFRLHNCQXNFdkIsU0FBQXNDLEdBQUFDLFFBQXVCQSxFQUFBQyxTQUFBQyxRQUFBQyxXQUFBQyxNQUV2QixJQUFBQyxHQUFBLEVBQ0FDLEVBQUEsS0FDQUMsRUFBQUgsSUFFQUksRUFBQSxLQUNBLFFBQUFDLEtBQUFULEVBQUEsQ0FDQSxJQUFBVCxFQUFBUyxFQUFBUyxHQUNBQyxFQUFBQyxFQUFBcEIsRUFBQXFCLE9BQUEsQ0FBbURDLEdBQUFaLEVBQUFhLEVBQUFDLEdBQUFkLEVBQUFlLEVBQ25EQyxHQUFBZixFQUFBWSxFQUFBSSxHQUFBaEIsRUFBQWMsSUFDQSxHQUFBTixFQUFBLENBQ0EsSUFBQVMsRUFBQXRCLEVBQUFzQixLQUFBVCxFQUFBUixNQUFBRCxHQUNBTSxFQUFBWSxJQUNBWCxFQUFBakIsRUFDQWdCLEVBQUFZLEVBQ0FkLEVBQUFLLEVBQUFSLE1BQ0FJLEVBQUFJLEVBQUFVLE9BS0EsR0FBQWYsR0FBQUUsRUFBQUosRUFBQSxDQUVBLElBWUFrQixFQUNBQyxFQWJBQyxFQUFBLENBQWlCVCxFQUFBUixFQUFBTyxHQUFBRyxFQUFBVixFQUFBUyxJQUNqQlMsRUFBQSxDQUFpQlYsRUFBQVIsRUFBQVcsR0FBQUQsRUFBQVYsRUFBQVksSUFDakJPLEVBQUFDLEVBQUEsQ0FDQUgsU0FDQUksWUFBQTFCLElBQ0EyQixFQUFBRixFQUFBLENBQ0FILE9BQUFDLEVBQ0FHLFlBQUExQixJQUNBNEIsRUFBQUgsRUFBQSxDQUNBSCxPQUFBbEIsRUFDQXNCLFlBQUExQixJQTBCQSxPQXRCQXdCLEVBQUFHLElBQ0FQLEVBQUFFLEdBQ0FPLE1BQUFMLEdBQ0FILEVBQUFFLEdBQ0FNLE1BQUFGLEtBRUFQLEVBQUFHLEdBQ0FNLE1BQUFGLEdBQ0FOLEVBQUFDLEdBQ0FPLE1BQUFMLEdBR0FwQixFQUFBeUIsTUFBQUQsRUFVQSxDQUNBbkIsV0FBQSxFQUNBUixNQUFBRyxFQUNBYyxLQUFBWixFQUNBYyxVQUNBQyxXQUNBL0IsT0FBQWlCLEdBSUEsT0FDQUUsV0FBQSxFQUNBUixTQUtBLFNBQUF3QixHQUFBSCxPQUEwQkEsRUFBQUMsU0FBQSxLQUFBRyxnQkFDMUIsTUFBQUgsTUFBQSxDQUE2QlYsRUFBQWEsRUFBQWIsRUFBQSxHQUFBRSxFQUFBVyxFQUFBWCxJQUM3QixJQUFBZSxFQUFBbEMsRUFBQTZCLGVBQUEsQ0FDQUgsU0FDQUMsU0FDQUcsZ0JBTUEsT0FKQUksRUFBQSxJQUFBQSxFQUFBQyxLQUFBQyxJQUFBRixJQUlBQSxFQUdBLFNBQUFwQixFQUFBdUIsRUFBQWQsR0FFQSxJQUFBZSxFQUFBLENBQXVCdEIsR0FBQXFCLEVBQUFFLFFBQUF0QixFQUFBQyxHQUFBbUIsRUFBQUUsUUFBQXBCLEVBQ3ZCQyxHQUFBaUIsRUFBQUcsU0FBQXZCLEVBQUFJLEdBQUFnQixFQUFBRyxTQUFBckIsR0FDQXNCLEVBQUEsQ0FBdUJ6QixHQUFBcUIsRUFBQUcsU0FBQXZCLEVBQUFDLEdBQUFtQixFQUFBRyxTQUFBckIsRUFDdkJDLEdBQUFpQixFQUFBSyxZQUFBekIsRUFBQUksR0FBQWdCLEVBQUFLLFlBQUF2QixHQUNBd0IsRUFBQSxDQUF1QjNCLEdBQUFxQixFQUFBSyxZQUFBekIsRUFBQUMsR0FBQW1CLEVBQUFLLFlBQUF2QixFQUN2QkMsR0FBQWlCLEVBQUFPLFdBQUEzQixFQUFBSSxHQUFBZ0IsRUFBQU8sV0FBQXpCLEdBQ0EwQixFQUFBLENBQXVCN0IsR0FBQXFCLEVBQUFPLFdBQUEzQixFQUFBQyxHQUFBbUIsRUFBQU8sV0FBQXpCLEVBQ3ZCQyxHQUFBaUIsRUFBQUUsUUFBQXRCLEVBQUFJLEdBQUFnQixFQUFBRSxRQUFBcEIsR0FDQTJCLEdBQUEsRUFDQUMsRUFBQSxLQUNBckMsRUFBQUgsSUFDQXlDLEVBQUEvQyxFQUFBZ0QsZ0JBQUExQixFQUFBZSxHQUNBVSxJQUNBRixFQUFBRSxFQUNBRCxFQUFBVCxFQUNBNUIsRUFBQVYsRUFBQXNCLEtBQUEwQixFQUFBLENBQXNDL0IsRUFBQU0sRUFBQVAsR0FBQUcsRUFBQUksRUFBQUwsTUFFdEMsSUFBQWdDLEVBQUFqRCxFQUFBZ0QsZ0JBQUExQixFQUFBa0IsR0FDQSxHQUFBUyxFQUFBLENBQ0EsSUFBQTVCLEVBQUF0QixFQUFBc0IsS0FBQTRCLEVBQUEsQ0FBcUNqQyxFQUFBTSxFQUFBUCxHQUFBRyxFQUFBSSxFQUFBTCxLQUNyQ0ksRUFBQVosSUFDQW9DLEVBQUFJLEVBQ0FILEVBQUFOLEVBQ0EvQixFQUFBWSxHQUdBLElBQUE2QixFQUFBbEQsRUFBQWdELGdCQUFBMUIsRUFBQW9CLEdBQ0EsR0FBQVEsRUFBQSxDQUNBLElBQUE3QixFQUFBdEIsRUFBQXNCLEtBQUE2QixFQUFBLENBQXNDbEMsRUFBQU0sRUFBQVAsR0FBQUcsRUFBQUksRUFBQUwsS0FDdENJLEVBQUFaLElBQ0FvQyxFQUFBSyxFQUNBSixFQUFBSixFQUNBakMsRUFBQVksR0FHQSxJQUFBOEIsRUFBQW5ELEVBQUFnRCxnQkFBQTFCLEVBQUFzQixHQUNBLEdBQUFPLEVBQUEsQ0FDQSxJQUFBOUIsRUFBQXRCLEVBQUFzQixLQUFBOEIsRUFBQSxDQUFvQ25DLEVBQUFNLEVBQUFQLEdBQUFHLEVBQUFJLEVBQUFMLEtBQ3BDSSxFQUFBWixJQUNBb0MsRUFBQU0sRUFDQUwsRUFBQUYsRUFDQW5DLEVBQUFZLEdBR0EsT0FBVWpCLE1BQUF5QyxFQUFBdkIsS0FBQXdCLEdBR1YsU0FBQU0sR0FBQWhELE1BQXdCQSxFQUFBaUQsUUFBQSxFQUFBQyxRQUFBLFNBQUFoRixPQUFBLFVBQUE2QixTQUFBb0QsV0FDeEIsSUFBQXRCLEVBQUFMLEVBQUEsQ0FDQUgsT0FBQXJCLEVBQ0F5QixZQUFBMUIsSUFFQXFELEVBVUEsVUFBQUQsT0FBMkJBLEVBQUFuRCxVQUMzQixJQUFBcUQsRUFBQUYsRUFBQXZDLEVBQUF1QyxFQUFBRyxNQUFBLEVBQ0FDLEVBQUFKLEVBQUFyQyxFQUFBcUMsRUFBQUssT0FBQSxFQUNBQyxFQUFBM0IsS0FBQTRCLE1BQUExRCxFQUFBWSxFQUFBeUMsR0FDQU0sRUFBQTdCLEtBQUE0QixNQUFBMUQsRUFBQWMsRUFBQXlDLEdBQ0EsT0FBVTNDLEVBQUE2QyxFQUFBM0MsRUFBQTZDLEdBZlZDLENBQUEsQ0FBbUNULFNBQUFuRCxVQU9uQyxPQU5Bb0QsRUFBQUgsT0FDQUcsRUFBQUYsUUFDQUUsRUFBQXhCLE1BQUFDLEVBQ0F1QixFQUFBbEYsT0FDQWtGLEVBQUFTLE1BQUFDLEtBQUFDLG1CQUNBRCxLQUFBQyxxQkFDQVgsRUE1TkFZLFFBQUFDLElBQUEsa0JBRUFDLFVBQUEsU0FBQUMsR0FDQSxJQUFBQyxFQUFBRCxFQUFBQyxLQUlBQyxFQVlBLFVBQUFDLGVBQ0FBLEVBQUEsR0FBa0J2RSxPQUNsQkEsRUFBQSxLQUFBd0UsZUFDQUEsRUFBQSxJQUFBcEIsT0FDQUEsRUFBQSxPQUVBLElBQUFxQixFQUFBLEdBQ0EsUUFBQWpFLEtBQUErRCxFQUFBLENBQ0EsSUFBQWpGLEVBQUFpRixFQUFBL0QsR0FDQWtFLEVBQUE3RSxFQUFBOEUsZ0JBQUEsQ0FDQUMsSUFBQXRGLEVBQUFxQixPQUNBMEMsVUFBQXJELEVBQ0E2RSxvQkFBQSxJQUdBSCxFQUFBSSxRQUFBLFNBQUE3RSxHQUVBLElBQUE4RSxFQUFBOUUsRUFDQUEsRUFBQStFLFNBQ0FELEVBQUFuRixFQUFBcUYsZUFBQSxDQUNBQyxXQUFBbEYsRUFDQW1GLFNBQUFsRixFQUNBbUYsT0FBQVosS0FJQSxJQUFBL0QsRUFBQVgsRUFBQSxDQUNBQyxRQUFBd0UsRUFDQXZFLFNBQ0FDLE1BQUE4RSxJQUdBMUIsRUFBQUosRUFBQSxDQUNBaEQsTUFBQVEsRUFBQVIsTUFDQWlELE1BQUF6QyxZQUNBMEMsTUFBQTFDLFlBQUEsaUJBQ0F0QyxLQUFBLElBQ0E2QixTQUNBb0QsV0FFQXFCLEVBQUFZLEtBQUFoQyxLQUlBLE9BQUFvQixFQXhEQWEsQ0FBQSxDQUNBZixlQUFBRixFQUFBRSxlQUNBdkUsT0FBQXFFLEVBQUFyRSxPQUNBd0UsZUFBQUgsRUFBQUcsZUFDQXBCLE9BQUFpQixFQUFBakIsU0FFQW1DLFlBQUFqQjs7Ozs4Q0NoQkEsSUFBQTFFLEVBQWdCcEMsK0JBQVEseUJBRXhCRSxFQUFBd0IsT0FBQSxFQUNBc0IsS0FBQSxFQUNBSyxJQUFBLEVBQ0FFLElBQUEsRUFDQXdDLFFBQUEsR0FDQUUsU0FBQSxHQUNBNUIsUUFBQSxNQUVBLElBQUFlLEVBQUE3QixFQUFBMEMsRUFBQSxFQUNBVixFQUFBaEMsRUFBQTBDLEVBQUEsRUFDQVQsRUFBQW5DLEVBQUEwQyxFQUFBLEVBQ0FULEVBQUFqQyxFQUFBMEMsRUFBQSxFQUNBLE9BQ0EvQyxLQUNBSyxJQUNBRSxJQUNBd0MsUUFDQUUsU0FDQTVCLFFBQ0FlLE1BQ0FHLFNBQ0FDLE9BQ0FGLFFBQ0FYLFFBQUEsQ0FBZ0J0QixFQUFBbUMsRUFBQWpDLEVBQUE2QixHQUNoQlIsU0FBQSxDQUFnQnZCLEVBQUFpQyxFQUFBL0IsRUFBQTZCLEdBQ2hCSixXQUFBLENBQWdCM0IsRUFBQW1DLEVBQUFqQyxFQUFBZ0MsR0FDaEJULFlBQUEsQ0FBZ0J6QixFQUFBaUMsRUFBQS9CLEVBQUFnQyxHQUNoQjJCLE9BQUEsRUFBaUI3RCxFQUFBbUMsRUFBQWpDLEVBQUE2QixHQUFnQixDQUFHL0IsRUFBQWlDLEVBQUEvQixFQUFBNkIsR0FBaUIsQ0FBRy9CLEVBQUFtQyxFQUFBakMsRUFBQWdDLEdBQW1CLENBQUdsQyxFQUFBaUMsRUFBQS9CLEVBQUFnQyxNQVM5RXJGLEVBQUE4SCxPQUxBLFNBQUFaLEVBQUEvRCxFQUFBRSxHQUNBNkQsRUFBQWpFLE9BQUFFLElBQ0ErRCxFQUFBakUsT0FBQUksSUFLQSxTQUFBNkQsR0FDQSxJQUFBakUsRUFBQWlFLEVBQUFqRSxPQUNBaUMsRUFBQWpDLEVBQUFJLEVBQUFKLEVBQUE4QyxPQUFBLEVBQ0FWLEVBQUFwQyxFQUFBSSxFQUFBSixFQUFBOEMsT0FBQSxFQUNBVCxFQUFBckMsRUFBQUUsRUFBQUYsRUFBQTRDLE1BQUEsRUFDQVQsRUFBQW5DLEVBQUFFLEVBQUFGLEVBQUE0QyxNQUFBLEVBRUE1QyxFQUFBaUMsTUFDQWpDLEVBQUFvQyxTQUNBcEMsRUFBQXFDLE9BQ0FyQyxFQUFBbUMsUUFDQW5DLEVBQUF3QixRQUFBLENBQXVCdEIsRUFBQW1DLEVBQUFqQyxFQUFBNkIsR0FDdkJqQyxFQUFBeUIsU0FBQSxDQUF1QnZCLEVBQUFpQyxFQUFBL0IsRUFBQTZCLEdBQ3ZCakMsRUFBQTZCLFdBQUEsQ0FBdUIzQixFQUFBbUMsRUFBQWpDLEVBQUFnQyxHQUN2QnBDLEVBQUEyQixZQUFBLENBQXVCekIsRUFBQWlDLEVBQUEvQixFQUFBZ0MsR0FsQnZCMEMsQ0FBQWIsSUEwSkFsSCxFQUFBaUgsZ0JBcElBLFVBQUFDLElBQTBCQSxFQUFBdkIsWUFBQXdCLHNCQUFBLElBRTFCLElBQUFhLEVBQUEsR0FDQSxHQUFBckMsRUFBQXRDLEVBQUE2RCxFQUFBaEMsSUFDQSxHQUFBUyxFQUFBeEMsRUFBQStELEVBQUE1QixLQUFBLENBQ0EwQyxFQUFBLENBQUFkLEVBQUF6QyxRQUFBeUMsRUFBQXhDLFNBQUF3QyxFQUFBcEMsWUFDQSxJQUFBbUQsRUFBQS9GLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUFwQyxXQUNBWCxNQUFBLE1BQ0E4RCxFQUFBWCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFNLEdBQ0EsSUFBQUcsRUFBQWxHLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUF4QyxTQUNBUCxPQUFBLE1BQ0FpRSxFQUFBZCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFTLFFBQ0csR0FBQXpDLEVBQUF4QyxFQUFBK0QsRUFBQTlCLE1BQUEsQ0FDSDRDLEVBQUEsQ0FBQWQsRUFBQXpDLFFBQUF5QyxFQUFBeEMsU0FBQXdDLEVBQUF0QyxhQUNBLElBQUFxRCxFQUFBL0YsRUFBQWdHLFlBQUEsQ0FDQUMsT0FBQXhDLEVBQ0FwRCxNQUFBMkUsRUFBQXpDLFFBQ0FOLE1BQUEsTUFDQThELEVBQUFYLFFBQUEsRUFDQVUsRUFBQUwsS0FBQU0sR0FDQSxJQUFBRyxFQUFBbEcsRUFBQWdHLFlBQUEsQ0FDQUMsT0FBQXhDLEVBQ0FwRCxNQUFBMkUsRUFBQXRDLFlBQ0FULE9BQUEsTUFDQWlFLEVBQUFkLFFBQUEsRUFDQVUsRUFBQUwsS0FBQVMsT0FDRyxDQUNISixFQUFBLENBQUFkLEVBQUF6QyxRQUFBeUMsRUFBQXhDLFVBQ0EsSUFBQXVELEVBQUEvRixFQUFBZ0csWUFBQSxDQUNBQyxPQUFBeEMsRUFDQXBELE1BQUEyRSxFQUFBekMsUUFDQU4sTUFBQSxNQUNBOEQsRUFBQVgsUUFBQSxFQUNBVSxFQUFBTCxLQUFBTSxHQUNBLElBQUFHLEVBQUFsRyxFQUFBZ0csWUFBQSxDQUNBQyxPQUFBeEMsRUFDQXBELE1BQUEyRSxFQUFBeEMsU0FDQVAsT0FBQSxNQUNBaUUsRUFBQWQsUUFBQSxFQUNBVSxFQUFBTCxLQUFBUyxRQUdFLEdBQUF6QyxFQUFBdEMsRUFBQTZELEVBQUE3QixPQUNGLEdBQUFNLEVBQUF4QyxFQUFBK0QsRUFBQTVCLEtBQUEsQ0FDQTBDLEVBQUEsQ0FBQWQsRUFBQXpDLFFBQUF5QyxFQUFBcEMsV0FBQW9DLEVBQUF0QyxhQUNBLElBQUFxRCxFQUFBL0YsRUFBQWdHLFlBQUEsQ0FDQUMsT0FBQXhDLEVBQ0FwRCxNQUFBMkUsRUFBQXRDLFlBQ0FULE1BQUEsTUFDQThELEVBQUFYLFFBQUEsRUFDQVUsRUFBQUwsS0FBQU0sR0FDQSxJQUFBRyxFQUFBbEcsRUFBQWdHLFlBQUEsQ0FDQUMsT0FBQXhDLEVBQ0FwRCxNQUFBMkUsRUFBQXpDLFFBQ0FOLE9BQUEsTUFDQWlFLEVBQUFkLFFBQUEsRUFDQVUsRUFBQUwsS0FBQVMsUUFDRyxHQUFBekMsRUFBQXhDLEVBQUErRCxFQUFBOUIsTUFBQSxDQUNINEMsRUFBQSxDQUFBZCxFQUFBeEMsU0FBQXdDLEVBQUFwQyxXQUFBb0MsRUFBQXRDLGFBQ0EsSUFBQXFELEVBQUEvRixFQUFBZ0csWUFBQSxDQUNBQyxPQUFBeEMsRUFDQXBELE1BQUEyRSxFQUFBeEMsU0FDQVAsTUFBQSxNQUNBOEQsRUFBQVgsUUFBQSxFQUNBVSxFQUFBTCxLQUFBTSxHQUNBLElBQUFHLEVBQUFsRyxFQUFBZ0csWUFBQSxDQUNBQyxPQUFBeEMsRUFDQXBELE1BQUEyRSxFQUFBcEMsV0FDQVgsT0FBQSxNQUNBaUUsRUFBQWQsUUFBQSxFQUNBVSxFQUFBTCxLQUFBUyxPQUNHLENBQ0hKLEVBQUEsQ0FBQWQsRUFBQXBDLFdBQUFvQyxFQUFBdEMsYUFDQSxJQUFBcUQsRUFBQS9GLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUF0QyxZQUNBVCxNQUFBLE1BQ0E4RCxFQUFBWCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFNLEdBQ0EsSUFBQUcsRUFBQWxHLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUFwQyxXQUNBWCxPQUFBLE1BQ0FpRSxFQUFBZCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFTLFFBSUEsR0FBQXpDLEVBQUF4QyxFQUFBK0QsRUFBQTVCLEtBQUEsQ0FDQTBDLEVBQUEsQ0FBQWQsRUFBQXpDLFFBQUF5QyxFQUFBcEMsWUFDQSxJQUFBbUQsRUFBQS9GLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUFwQyxXQUNBWCxNQUFBLE1BQ0E4RCxFQUFBWCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFNLEdBQ0EsSUFBQUcsRUFBQWxHLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUF6QyxRQUNBTixPQUFBLE1BQ0FpRSxFQUFBZCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFTLFFBQ0csR0FBQXpDLEVBQUF4QyxFQUFBK0QsRUFBQTlCLE1BQUEsQ0FDSDRDLEVBQUEsQ0FBQWQsRUFBQXhDLFNBQUF3QyxFQUFBdEMsYUFDQSxJQUFBcUQsRUFBQS9GLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUF4QyxTQUNBUCxNQUFBLE1BQ0E4RCxFQUFBWCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFNLEdBQ0EsSUFBQUcsRUFBQWxHLEVBQUFnRyxZQUFBLENBQ0FDLE9BQUF4QyxFQUNBcEQsTUFBQTJFLEVBQUF0QyxZQUNBVCxPQUFBLE1BQ0FpRSxFQUFBZCxRQUFBLEVBQ0FVLEVBQUFMLEtBQUFTLFFBRUE3QixRQUFBQyxJQUFBLGtFQU1BLE9BRkF3QixFQUFBTixPQUFBLEdBQUFNLEVBQUFOLE9BQUEsSUFBQW5CLFFBQUFDLElBQUEsMEJBQUF3QixFQUFBTixRQUVBTSxHQXlCQWhJLEVBQUFxSSxVQXBCQSxTQUFBQyxFQUFBQyxHQUVBLElBQUFDLEVBQUFGLEVBQUFyRixPQUNBd0YsRUFBQUYsRUFBQXRGLE9BRUF5RixHQUFBLEVBYUEsT0FQQUEsSUFKQUYsRUFBQXRELElBQUF1RCxFQUFBcEQsUUFDQW1ELEVBQUFuRCxPQUFBb0QsRUFBQXZELEtBQ0FzRCxFQUFBcEQsTUFBQXFELEVBQUFuRCxNQUNBa0QsRUFBQWxELEtBQUFtRCxFQUFBckQsUUFxQ0FwRixFQUFBbUYsZ0JBekJBLFNBQUF3RCxFQUFBQyxHQUdBLElBQUFDLElBQUFELEVBQUF0RixHQUFBc0YsRUFBQTFGLEtBQUF5RixFQUFBdkYsR0FBQXdGLEVBQUF4RixLQUNBd0YsRUFBQXJGLEdBQUFxRixFQUFBeEYsS0FBQXVGLEVBQUF6RixHQUFBMEYsRUFBQTFGLE9BQ0EwRixFQUFBckYsR0FBQXFGLEVBQUF4RixLQUFBdUYsRUFBQXJGLEdBQUFxRixFQUFBekYsS0FDQTBGLEVBQUF0RixHQUFBc0YsRUFBQTFGLEtBQUF5RixFQUFBcEYsR0FBQW9GLEVBQUF2RixLQUNBMEYsSUFBQUgsRUFBQXJGLEdBQUFxRixFQUFBekYsS0FBQXlGLEVBQUF2RixHQUFBd0YsRUFBQXhGLEtBQ0F1RixFQUFBcEYsR0FBQW9GLEVBQUF2RixLQUFBdUYsRUFBQXpGLEdBQUEwRixFQUFBMUYsT0FDQTBGLEVBQUFyRixHQUFBcUYsRUFBQXhGLEtBQUF1RixFQUFBckYsR0FBQXFGLEVBQUF6RixLQUNBMEYsRUFBQXRGLEdBQUFzRixFQUFBMUYsS0FBQXlGLEVBQUFwRixHQUFBb0YsRUFBQXZGLEtBR0EsT0FBQXlGLEdBQUEsR0FBQUEsR0FBQSxHQUFBQyxHQUFBLEdBQUFBLEdBQUEsR0FLQSxDQUNBM0YsRUFKQXdGLEVBQUF6RixHQUFBMkYsR0FBQUYsRUFBQXJGLEdBQUFxRixFQUFBekYsSUFLQUcsRUFKQXNGLEVBQUF2RixHQUFBeUYsR0FBQUYsRUFBQXBGLEdBQUFvRixFQUFBdkYsTUFnQ0FwRCxFQUFBK0ksZ0JBckJBLFNBQUF0RixFQUFBdUYsR0FJQSxJQUFBMUQsRUFBQWUsS0FBQWxCLGdCQUFBakMsR0FBQUUsR0FBQUUsR0FBQUMsR0FBQTBGLEdBQUFDLEdBQUFELEdBQUFDLEdBQUFDLElBQ0EvRCxFQUFBaUIsS0FBQWxCLGdCQUFBakMsR0FBQUUsR0FBQUUsR0FBQUMsR0FBQTBGLEdBQUFHLEdBQUFGLEdBQUFELEdBQUFHLEdBQUFGLEdBQUFDLElBQ0FqRSxFQUFBbUIsS0FBQWxCLGdCQUFBakMsR0FBQUUsR0FBQUUsR0FBQUMsR0FBQTBGLEdBQUFDLEdBQUFELEdBQUFHLEdBQUFGLElBQ0E3RCxFQUFBZ0IsS0FBQWxCLGdCQUFBakMsR0FBQUUsR0FBQUUsR0FBQUMsR0FBQTBGLEdBQUFDLEdBQUFDLEdBQUFGLEdBQUFHLEdBQUFGLEdBQUFDLElBU0EsU0FBQTdELEdBQUFGLEdBQUFGLEdBQUFHLElBUkEsQ0FDQUMsT0FDQUYsUUFDQUYsTUFDQUc7Ozs7NENDN1BBckYsRUFBQXFKLE1BQUFDLElBQ0EsSUFBQUMsTUFBQUQsSUFVQXRKLEVBQUF3SixZQVBBLFdBQ0EsT0FDQXhJLEVBQUFxRCxLQUFBb0YsTUFBQSxJQUFBcEYsS0FBQXFGLFVBQ0FDLEVBQUF0RixLQUFBb0YsTUFBQSxJQUFBcEYsS0FBQXFGLFVBQ0FFLEVBQUF2RixLQUFBb0YsTUFBQSxJQUFBcEYsS0FBQXFGLFlBS0ExSixFQUFBNkosU0FBQSxDQUFBakcsRUFBQUMsS0FHQSxPQUFXVixFQUZYVSxFQUFBVixHQUFBVSxFQUFBVixFQUFBVSxFQUFBVixHQUFBLEVBRVdFLEVBRFhRLEVBQUFSLEdBQUFRLEVBQUFSLEVBQUFPLEVBQUFQLEdBQUEsSUFJQXJELEVBQUFrSSxZQUFBLEVBQXdCQyxTQUFBLENBQVFoRixFQUFBLEVBQUFFLEVBQUEsR0FBU2QsUUFBQSxDQUFTWSxFQUFBLEVBQUFFLEVBQUEsR0FBU2MsUUFBQSxNQUMzRCxJQUFBbEMsRUFBQW9DLEtBQUF5RixJQUFBM0YsR0FDQTVELEVBQUE4RCxLQUFBMEYsSUFBQTVGLEdBR0E2RixFQUFBLENBQXdCN0csRUFBQVosRUFBQVksRUFBQUUsRUFBQWQsRUFBQWMsR0FHeEIyRyxFQUFBN0csR0FBQWdGLEVBQUFoRixFQUNBNkcsRUFBQTNHLEdBQUE4RSxFQUFBOUUsRUFHQSxJQUFBNEcsRUFBQUQsRUFBQTdHLEVBQUE1QyxFQUFBeUosRUFBQTNHLEVBQUFwQixFQUNBaUksRUFBQUYsRUFBQTdHLEVBQUFsQixFQUFBK0gsRUFBQTNHLEVBQUE5QyxFQUtBLE9BRkF5SixFQUFBN0csRUFBQThHLEVBQUE5QixFQUFBaEYsRUFDQTZHLEVBQUEzRyxFQUFBNkcsRUFBQS9CLEVBQUE5RSxFQUNBMkcsR0FHQWhLLEVBQUF1SCxlQUFBLEVBQTJCQyxhQUFBQyxXQUFBQyxhQUMzQixJQUFBeUMsRUFBQTlGLEtBQUErRixLQUNBL0YsS0FBQWdHLElBQUE3QyxFQUFBckUsRUFBQXNFLEVBQUF0RSxFQUFBLEdBQ0FrQixLQUFBZ0csSUFBQTdDLEVBQUFuRSxFQUFBb0UsRUFBQXBFLEVBQUEsSUFFQWlILEVBQUE1QyxFQUFBeUMsRUFLQSxNQUpBLENBQ0FoSCxFQUFBc0UsRUFBQXRFLEdBQUFzRSxFQUFBdEUsRUFBQXFFLEVBQUFyRSxHQUFBZ0gsRUFBQUcsRUFDQWpILEVBQUFvRSxFQUFBcEUsR0FBQW9FLEVBQUFwRSxFQUFBbUUsRUFBQW5FLEdBQUE4RyxFQUFBRyxJQVdBdEssRUFBQXdELEtBTkEsU0FBQUksRUFBQUMsR0FDQSxJQUFBMEcsRUFBQWxHLEtBQUFDLElBQUFWLEVBQUFULEVBQUFVLEVBQUFWLEdBQ0FxSCxFQUFBbkcsS0FBQUMsSUFBQVYsRUFBQVAsRUFBQVEsRUFBQVIsR0FFQSxPQURBZ0IsS0FBQStGLEtBQUEvRixLQUFBZ0csSUFBQUUsRUFBQSxHQUFBbEcsS0FBQWdHLElBQUFHLEVBQUEsT0FLQXhLLEVBQUErRCxlQUFBLEVBQTJCSCxTQUFBQyxTQUFBRyxjQUFBLENBQTZCYixFQUFBLEVBQUFFLEVBQUEsT0FDeEQsR0FBQU8sRUFBQVQsSUFBQVUsRUFBQVYsR0FBQVMsRUFBQVAsSUFBQVEsRUFBQVIsRUFBQSxTQUVBLElBQUFvSCxFQUFBLENBQW1CdEgsRUFBQVMsRUFBQVQsRUFBQWEsRUFBQWIsRUFBQUUsRUFBQU8sRUFBQVAsRUFBQVcsRUFBQVgsR0FDbkJxSCxFQUFBLENBQW1CdkgsRUFBQVUsRUFBQVYsRUFBQWEsRUFBQWIsRUFBQUUsRUFBQVEsRUFBQVIsRUFBQVcsRUFBQVgsR0FJbkJzSCxFQUFBdEcsS0FBQXVHLE1BQUFILEVBQUFwSCxFQUFBb0gsRUFBQXRILEdBQ0EwSCxFQUFBeEcsS0FBQXVHLE1BQUFGLEVBQUFySCxFQUFBcUgsRUFBQXZILEdBS0EsT0FKQXdILEVBQUEsSUFBQUEsR0FBQSxFQUFBdEcsS0FBQXlHLElBQ0FELEVBQUEsSUFBQUEsR0FBQSxFQUFBeEcsS0FBQXlHLElBQ0FELEVBQUFGLEdBV0EzSyxFQUFBK0ssT0FBQSxFQUFtQkMsUUFBQUMsU0FBQUMsT0FBQUMsU0FBQUMsV0FNbkIsT0FMQUosRUFBQUMsRUFBQUQsRUFBQUMsRUFDQUQsRUFBQUUsSUFBQUYsRUFBQUUsSUFHQUUsRUFBQUQsS0FEQUgsRUFBQUMsSUFEQUMsRUFBQUQsSUFHQUUsR0FrQkFuTCxFQUFBcUwsWUFmQSxTQUFBQSxFQUFBbkUsR0FFQSxJQUFBb0UsRUFBQSxHQUVBLFFBQUF4SSxLQUFBb0UsRUFBQSxDQUNBLElBQUFxRSxFQUFBckUsRUFBQXBFLEdBQ0EsaUJBQUF5SSxHQUFBLE9BQUFBLElBQ0FELEVBQUF4SSxHQUFBdUksRUFBQUUsSUFFQSxPQUFBQSxJQUNBRCxFQUFBeEksR0FBQXlJLEdBR0EsT0FBQUQsR0EwQ0F0TCxFQUFBd0wsYUF0Q0EsU0FBQXRFLEdBQ0EsSUFBQXVFLEVBQUEsRUFtQ0EsT0FQQSxTQUFBQSxHQUNBLE9BQUFBLEVBQUEsS0FBQUEsRUFBQSxTQUNBQSxFQUFBLFNBQUFBLEVBQUEsTUFBQUMsUUFBQSxVQUNBRCxFQUFBLFlBQUFBLEVBQUEsU0FBQUMsUUFBQSxXQUNBRCxFQUFBLFlBQUFDLFFBQUEsVUFHQUMsQ0FqQ0EsU0FBQUMsRUFBQTFFLEdBQ0EsR0FBQUEsUUFDQSxjQUFBQSxHQUNBLGFBQ0F1RSxHQUFBLEVBQ0EsTUFDQSxhQUNBQSxHQUFBLEVBQUF2RSxFQUFBUSxPQUNBLE1BQ0EsY0FDQStELEdBQUEsRUFDQSxNQUNBLGFBQ0EsSUFBQUksRUFBQWpMLE9BQUFrQixVQUFBZ0ssU0FBQXpMLEtBQUE2RyxHQUFBNkUsTUFBQSxNQUNBLGNBQUFGLEdBQUEsVUFBQUEsRUFDQSxRQUFBcEssS0FBQXlGLEVBQ0FBLEVBQUFuRixlQUFBTixJQUNBbUssRUFBQTFFLEVBQUF6RixTQUVpQmdLLEdBQUEsRUFBQXZFLEVBQUE0RSxXQUFBcEUsT0FJakIsT0FBQStELEVBVUFHLENBQUExRSIsImZpbGUiOiJ3b3JrZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9jbGllbnRTb3VyY2UvanMvbGluZU9mU2lnaHQud29ya2VyLmpzXCIpO1xuIiwiY29uc3QgVXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vc2hhcmVkL1V0aWxpdGllcy5qcycpO1xuY29uc3QgSGl0Ym94ID0gcmVxdWlyZSgnLi4vLi4vc2hhcmVkL0hpdGJveC5qcycpO1xuXG5jb25zb2xlLmxvZyhcIldvcmtlciBjcmVhdGVkXCIpO1xuXG5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCl7XG5cdGxldCBkYXRhID0gZXZlbnQuZGF0YTtcblx0Ly8gY29uc29sZS5sb2coXCJtZXNzYWdlIHJlY2VpdmVkIGluIHdvcmtlcjpcIiwgZXZlbnQuZGF0YSk7XG5cdC8vIGxldCB0ZXN0UmV0dXJuID0gZXZlbnQuZGF0YSAqIDI7XG5cdC8vIHBvc3RNZXNzYWdlKHRlc3RSZXR1cm4pO1xuXHRsZXQgcG9pbnRzVG9TZW5kID0gZ2V0UG9pbnRzKHtcblx0XHRvYmplY3RzSW5SYW5nZTogZGF0YS5vYmplY3RzSW5SYW5nZSxcblx0XHRvcmlnaW46ICAgICAgICAgZGF0YS5vcmlnaW4sXG5cdFx0cmVuZGVyRGlzdGFuY2U6IGRhdGEucmVuZGVyRGlzdGFuY2UsXG5cdFx0Y2FtZXJhOiAgICAgICAgIGRhdGEuY2FtZXJhXG5cdH0pO1xuXHRwb3N0TWVzc2FnZShwb2ludHNUb1NlbmQpO1xufS8vb24gbWVzc2FnZVxuXG5cblxuXG5mdW5jdGlvbiBnZXRQb2ludHMoe1xuXHRvYmplY3RzSW5SYW5nZT17fSxcblx0b3JpZ2luPW51bGwsXG5cdHJlbmRlckRpc3RhbmNlPTUwMCxcblx0Y2FtZXJhPW51bGxcbn0pe1xuXHRsZXQgbGlzdE9mUG9pbnRzID0gW107XG5cdGZvcih2YXIgaWQgaW4gb2JqZWN0c0luUmFuZ2Upe1xuXHRcdGxldCBvYmplY3QgPSBvYmplY3RzSW5SYW5nZVtpZF07XG5cdFx0bGV0IHBvaW50cyA9IEhpdGJveC5nZXRWaXN1YWxQb2ludHMoe1xuXHRcdFx0b2JqOiAgICAgICAgIG9iamVjdC5oaXRib3gsXG5cdFx0XHR2aWV3UG9pbnQ6ICAgb3JpZ2luLFxuXHRcdFx0Z2V0UG9pbnRzQWZ0ZXJFZGdlOiB0cnVlXG5cdFx0fSk7XG5cblx0XHRwb2ludHMuZm9yRWFjaChmdW5jdGlvbihwb2ludCl7XG5cblx0XHRcdGxldCBwb2ludFRvQ2hlY2sgPSBwb2ludDtcblx0XHRcdGlmKHBvaW50LmV4dGVuZCl7XG5cdFx0XHRcdHBvaW50VG9DaGVjayA9IFV0aWxpdGllcy5leHRlbmRFbmRQb2ludCh7XG5cdFx0XHRcdFx0c3RhcnRQb2ludDogb3JpZ2luLCBcblx0XHRcdFx0XHRlbmRQb2ludDogcG9pbnQsIFxuXHRcdFx0XHRcdGxlbmd0aDogcmVuZGVyRGlzdGFuY2Vcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGxldCBjb2xsaXNpb24gPSBnZXRDb2xsaXNpb24oe1xuXHRcdFx0XHRvYmplY3RzOiBvYmplY3RzSW5SYW5nZSwgXG5cdFx0XHRcdG9yaWdpbjogIG9yaWdpbiwgXG5cdFx0XHRcdHBvaW50OiAgIHBvaW50VG9DaGVja1xuXHRcdFx0fSk7XG5cblx0XHRcdGxldCB2aWV3UG9pbnQgPSBnZXRWaWV3UG9pbnQoe1xuXHRcdFx0XHRwb2ludDogY29sbGlzaW9uLnBvaW50LCBcblx0XHRcdFx0ZWRnZTogICFjb2xsaXNpb24uY29sbGlzaW9uLFxuXHRcdFx0XHRjb2xvcjogKGNvbGxpc2lvbi5jb2xsaXNpb24gPyBcImdyZWVuXCIgOiBcInllbGxvd1wiKSxcblx0XHRcdFx0bmFtZTogXCJQXCIsXG5cdFx0XHRcdG9yaWdpbjogb3JpZ2luLFxuXHRcdFx0XHRjYW1lcmE6IGNhbWVyYVxuXHRcdFx0fSk7XG5cdFx0XHRsaXN0T2ZQb2ludHMucHVzaCh2aWV3UG9pbnQpO1xuXG5cdFx0fSk7Ly9mb3IgZWFjaCBwb2ludCBpbiBvYmplY3Rcblx0fS8vZm9yIG9iamVjdHMgaW4gcmFuZ2Vcblx0cmV0dXJuIGxpc3RPZlBvaW50cztcbn0vL2dldCBQb2ludHNcblxuXG5cbmZ1bmN0aW9uIGdldENvbGxpc2lvbih7b2JqZWN0cywgb3JpZ2luLCBwb2ludCwgZGlzdGFuY2U9SW5maW5pdHl9KXtcblx0XHQvL2NoZWNrIGFsbCBvYmplY3RzIGluIHJhbmdlIGZvciBjb2xsaXNpb25cblx0XHRsZXQgY2xvc2VzdENvbGxpc2lvbiA9IGZhbHNlO1xuXHRcdGxldCBjbG9zZXN0U2VnbWVudCA9IG51bGw7XG5cdFx0bGV0IGNsb3Nlc3REaXN0ID0gSW5maW5pdHk7XG5cdFx0Ly9mb3Igb2JqZWN0IGdsb3dcblx0XHRsZXQgY2xvc2VzdE9iaiA9IG51bGw7XG5cdFx0Zm9yKHZhciBpZCBpbiBvYmplY3RzKXtcblx0XHRcdGxldCBvYmplY3QgPSBvYmplY3RzW2lkXTtcblx0XHRcdGxldCBjb2xsaXNpb24gPSBnZXRJbnRlcnNlY3Rpb24ob2JqZWN0LmhpdGJveCwge3gxOiBvcmlnaW4ueCwgIHkxOiBvcmlnaW4ueSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICAgICAgICB4MjogcG9pbnQueCwgICB5MjogcG9pbnQueX0pO1xuXHRcdFx0aWYoY29sbGlzaW9uKXtcblx0XHRcdFx0bGV0IGRpc3QgPSBVdGlsaXRpZXMuZGlzdChjb2xsaXNpb24ucG9pbnQsIG9yaWdpbik7XG5cdFx0XHRcdGlmKGNsb3Nlc3REaXN0ID4gZGlzdCl7XG5cdFx0XHRcdFx0Y2xvc2VzdE9iaiA9IG9iamVjdDtcblx0XHRcdFx0XHRjbG9zZXN0RGlzdCA9IGRpc3Q7XG5cdFx0XHRcdFx0Y2xvc2VzdENvbGxpc2lvbiA9IGNvbGxpc2lvbi5wb2ludDtcblx0XHRcdFx0XHRjbG9zZXN0U2VnbWVudCA9IGNvbGxpc2lvbi5saW5lO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fS8vZm9yIG9iamVjdHMgaW4gcmFuZ2VcblxuXHRcdGlmKGNsb3Nlc3RDb2xsaXNpb24gJiYgY2xvc2VzdERpc3QgPCBkaXN0YW5jZSl7XG5cdFx0XHQvL21ha2UgcG9pbnRzIGF0IHRoZSBjb3JuZXJzIG9mIHRoZSBib3hcblx0XHRcdGxldCBwb2ludDEgPSB7eDogY2xvc2VzdFNlZ21lbnQueDEsIHk6IGNsb3Nlc3RTZWdtZW50LnkxfTtcblx0XHRcdGxldCBwb2ludDIgPSB7eDogY2xvc2VzdFNlZ21lbnQueDIsIHk6IGNsb3Nlc3RTZWdtZW50LnkyfTtcblx0XHRcdGxldCBhbmdsZUNvbGxpc2lvblRvUG9pbnQxID0gY2FsY3VsYXRlQW5nbGUoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvaW50MTogcG9pbnQxLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNlbnRlclBvaW50Om9yaWdpbn0pO1xuXHRcdFx0bGV0IGFuZ2xlQ29sbGlzaW9uVG9Qb2ludDIgPSBjYWxjdWxhdGVBbmdsZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cG9pbnQxOiBwb2ludDIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBjZW50ZXJQb2ludDpvcmlnaW59KTtcblx0XHRcdGxldCBhbmdsZUNvbGxpc2lvbiA9IGNhbGN1bGF0ZUFuZ2xlKHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb2ludDE6IGNsb3Nlc3RDb2xsaXNpb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgICBjZW50ZXJQb2ludDpvcmlnaW59KTtcblxuXHRcdFx0bGV0IGN3UG9pbnQ7XG5cdFx0XHRsZXQgY2N3UG9pbnQ7XG5cdFx0XHRpZihhbmdsZUNvbGxpc2lvblRvUG9pbnQxID4gYW5nbGVDb2xsaXNpb25Ub1BvaW50Mil7XG5cdFx0XHRcdGN3UG9pbnQgID0gcG9pbnQxO1xuXHRcdFx0XHRjd1BvaW50LmFuZ2xlID0gYW5nbGVDb2xsaXNpb25Ub1BvaW50MTtcblx0XHRcdFx0Y2N3UG9pbnQgPSBwb2ludDI7XG5cdFx0XHRcdGNjd1BvaW50LmFuZ2xlID0gYW5nbGVDb2xsaXNpb25Ub1BvaW50Mjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGN3UG9pbnQgID0gcG9pbnQyO1xuXHRcdFx0XHRjd1BvaW50LmFuZ2xlID0gYW5nbGVDb2xsaXNpb25Ub1BvaW50Mjtcblx0XHRcdFx0Y2N3UG9pbnQgPSBwb2ludDE7XG5cdFx0XHRcdGNjd1BvaW50LmFuZ2xlID0gYW5nbGVDb2xsaXNpb25Ub1BvaW50MTtcblx0XHRcdH1cblxuXHRcdFx0Y2xvc2VzdENvbGxpc2lvbi5hbmdsZSA9IGFuZ2xlQ29sbGlzaW9uO1xuXG5cdFx0XHQvL21ha2Ugc3VyZSBib3ggZWRnZXMgYXJlIG5vdCBvdXQgb2YgcmFuZ2Vcblx0XHRcdC8vIGlmKGN3UG9pbnQuYW5nbGUgID49IGVuZFBvaW50QW5nbGUgfHwgY3dQb2ludC5hbmdsZSAgPD0gc3RhcnRQb2ludEFuZ2xlKXtcblx0XHRcdC8vIFx0Y3dQb2ludCA9IG51bGw7XG5cdFx0XHQvLyB9XG5cdFx0XHQvLyBpZihjY3dQb2ludC5hbmdsZSA+PSBlbmRQb2ludEFuZ2xlIHx8IGNjd1BvaW50LmFuZ2xlIDw9IHN0YXJ0UG9pbnRBbmdsZSl7XG5cdFx0XHQvLyBcdGNjd1BvaW50ID0gbnVsbDtcblx0XHRcdC8vIH1cblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y29sbGlzaW9uOiB0cnVlLFxuXHRcdFx0XHRwb2ludDogY2xvc2VzdENvbGxpc2lvbixcblx0XHRcdFx0ZGlzdDogY2xvc2VzdERpc3QsXG5cdFx0XHRcdGN3UG9pbnQ6IGN3UG9pbnQsXG5cdFx0XHRcdGNjd1BvaW50OiBjY3dQb2ludCxcblx0XHRcdFx0b2JqZWN0OiBjbG9zZXN0T2JqXG5cdFx0XHR9XG5cdFx0fS8vY2xvc2VzdCBDb2xsaXNpb25cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGNvbGxpc2lvbjogZmFsc2UsXG5cdFx0XHRcdHBvaW50OiBwb2ludFxuXHRcdFx0fVxuXHRcdH1cblx0fS8vZ2V0Q29sbGlzaW9uXG5cblx0ZnVuY3Rpb24gY2FsY3VsYXRlQW5nbGUoe3BvaW50MSwgcG9pbnQyPW51bGwsIGNlbnRlclBvaW50fSl7XG5cdFx0aWYocG9pbnQyPT1udWxsKSBwb2ludDIgPSB7eDogY2VudGVyUG9pbnQueCsxMCwgeTpjZW50ZXJQb2ludC55fTtcblx0XHRsZXQgcEFuZ2xlID0gVXRpbGl0aWVzLmNhbGN1bGF0ZUFuZ2xlKHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cG9pbnQxOiBwb2ludDEsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRwb2ludDI6IHBvaW50Mixcblx0XHRcdFx0XHRcdFx0XHRcdCAgICBjZW50ZXJQb2ludDpjZW50ZXJQb2ludH0pO1xuXHRcdC8vIGlmKHBBbmdsZSA8IDApIHBBbmdsZSA9IHBBbmdsZSArIE1hdGguUEkqMjtcblx0XHRpZihwQW5nbGUgPCAwKSBwQW5nbGUgPSBNYXRoLmFicyhwQW5nbGUpO1xuXHRcdC8vIGlmKHBBbmdsZSA+IE1hdGguUEkpIHBBbmdsZSA9IE1hdGguUEkgLSBwQW5nbGU7XG5cdFx0Ly8gaWYocEFuZ2xlID4gd2lkdGgpIHBBbmdsZSA9IE1hdGguUEkqMiAtIHBBbmdsZTtcblx0XHQvL0NvdWxkIGNhdXNlIGFuIGlzc3VlIHdoZW4gY29uZSBpcyB3aWRlciB0aGFuIFBJIGFrYSAxODAsIG1heWJlP1xuXHRcdHJldHVybiBwQW5nbGU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oY29ybmVycywgbGluZSl7XG5cdFx0Ly8gY29uc29sZS5sb2coXCJjb3JuZXJzOlwiLGNvcm5lcnMpO1xuXHRcdGxldCBib3hMaW5lVG9wICAgID0ge3gxOmNvcm5lcnMudG9wTGVmdC54LCAgICAgeTE6Y29ybmVycy50b3BMZWZ0LnksIFxuXHRcdFx0XHRcdFx0ICAgICB4Mjpjb3JuZXJzLnRvcFJpZ2h0LngsICAgIHkyOmNvcm5lcnMudG9wUmlnaHQueX07XG5cdFx0bGV0IGJveExpbmVSaWdodCAgPSB7eDE6Y29ybmVycy50b3BSaWdodC54LCAgICB5MTpjb3JuZXJzLnRvcFJpZ2h0LnksIFxuXHRcdFx0XHRcdFx0ICAgICB4Mjpjb3JuZXJzLmJvdHRvbVJpZ2h0LngsIHkyOmNvcm5lcnMuYm90dG9tUmlnaHQueX07XG5cdFx0bGV0IGJveExpbmVCb3R0b20gPSB7eDE6Y29ybmVycy5ib3R0b21SaWdodC54LCB5MTpjb3JuZXJzLmJvdHRvbVJpZ2h0LnksIFxuXHRcdFx0XHRcdFx0ICAgICB4Mjpjb3JuZXJzLmJvdHRvbUxlZnQueCwgIHkyOmNvcm5lcnMuYm90dG9tTGVmdC55fTtcblx0XHRsZXQgYm94TGluZUxlZnQgICA9IHt4MTpjb3JuZXJzLmJvdHRvbUxlZnQueCwgIHkxOmNvcm5lcnMuYm90dG9tTGVmdC55LCBcblx0XHRcdFx0XHRcdCAgICAgeDI6Y29ybmVycy50b3BMZWZ0LngsICAgICB5Mjpjb3JuZXJzLnRvcExlZnQueX07XG5cdFx0bGV0IGludGVyc2VjdGlvbiA9IGZhbHNlO1xuXHRcdGxldCBpbnRlcnNlY3RpbmdTZWdtZW50ID0gbnVsbDtcblx0XHRsZXQgY2xvc2VzdERpc3QgPSBJbmZpbml0eTtcblx0XHRsZXQgdG9wID0gSGl0Ym94LmNvbGxpZGVMaW5lTGluZShsaW5lLCBib3hMaW5lVG9wKTtcblx0XHRpZih0b3Ape1xuXHRcdFx0aW50ZXJzZWN0aW9uID0gdG9wO1xuXHRcdFx0aW50ZXJzZWN0aW5nU2VnbWVudCA9IGJveExpbmVUb3A7XG5cdFx0XHRjbG9zZXN0RGlzdCA9IFV0aWxpdGllcy5kaXN0KHRvcCwge3g6bGluZS54MSwgeTpsaW5lLnkxfSk7XG5cdFx0fVxuXHRcdGxldCByaWdodCA9IEhpdGJveC5jb2xsaWRlTGluZUxpbmUobGluZSwgYm94TGluZVJpZ2h0KTtcblx0XHRpZihyaWdodCl7XG5cdFx0XHRsZXQgZGlzdCA9IFV0aWxpdGllcy5kaXN0KHJpZ2h0LCB7eDpsaW5lLngxLCB5OmxpbmUueTF9KTtcblx0XHRcdGlmKGRpc3QgPCBjbG9zZXN0RGlzdCl7XG5cdFx0XHRcdGludGVyc2VjdGlvbiA9IHJpZ2h0O1xuXHRcdFx0XHRpbnRlcnNlY3RpbmdTZWdtZW50ID0gYm94TGluZVJpZ2h0O1xuXHRcdFx0XHRjbG9zZXN0RGlzdCA9IGRpc3Q7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGxldCBib3R0b20gPSBIaXRib3guY29sbGlkZUxpbmVMaW5lKGxpbmUsIGJveExpbmVCb3R0b20pO1xuXHRcdGlmKGJvdHRvbSl7XG5cdFx0XHRsZXQgZGlzdCA9IFV0aWxpdGllcy5kaXN0KGJvdHRvbSwge3g6bGluZS54MSwgeTpsaW5lLnkxfSk7XG5cdFx0XHRpZihkaXN0IDwgY2xvc2VzdERpc3Qpe1xuXHRcdFx0XHRpbnRlcnNlY3Rpb24gPSBib3R0b207XG5cdFx0XHRcdGludGVyc2VjdGluZ1NlZ21lbnQgPSBib3hMaW5lQm90dG9tO1xuXHRcdFx0XHRjbG9zZXN0RGlzdCA9IGRpc3Q7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGxldCBsZWZ0ID0gSGl0Ym94LmNvbGxpZGVMaW5lTGluZShsaW5lLCBib3hMaW5lTGVmdCk7XG5cdFx0aWYobGVmdCl7XG5cdFx0XHRsZXQgZGlzdCA9IFV0aWxpdGllcy5kaXN0KGxlZnQsIHt4OmxpbmUueDEsIHk6bGluZS55MX0pO1xuXHRcdFx0aWYoZGlzdCA8IGNsb3Nlc3REaXN0KXtcblx0XHRcdFx0aW50ZXJzZWN0aW9uID0gbGVmdDtcblx0XHRcdFx0aW50ZXJzZWN0aW5nU2VnbWVudCA9IGJveExpbmVMZWZ0O1xuXHRcdFx0XHRjbG9zZXN0RGlzdCA9IGRpc3Q7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB7cG9pbnQ6IGludGVyc2VjdGlvbiwgbGluZTogaW50ZXJzZWN0aW5nU2VnbWVudH07XG5cdH0vL2dldCBpbnRlcnNlY3Rpb25cblxuXHRmdW5jdGlvbiBnZXRWaWV3UG9pbnQoe3BvaW50LCBlZGdlPWZhbHNlLCBjb2xvcj1cInllbGxvd1wiLCBuYW1lPVwiTm8gTmFtZVwiLCBvcmlnaW4sIGNhbWVyYX0pe1xuXHRcdGxldCBwQW5nbGUgPSBjYWxjdWxhdGVBbmdsZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBvaW50MTogcG9pbnQsXG5cdFx0XHRcdFx0XHRcdFx0XHQgICAgY2VudGVyUG9pbnQ6b3JpZ2lufSk7XG5cdFx0Ly90cmFuc2xhdGUgdG8gcG9pbnQgZm9yIGRpc3BsYXlcblx0XHRsZXQgdmlld1BvaW50ID0gdHJhbnNsYXRlQ2FtZXJhKHtjYW1lcmE6IGNhbWVyYSwgcG9pbnQ6IHBvaW50fSk7XG5cdFx0dmlld1BvaW50LmVkZ2UgPSBlZGdlO1xuXHRcdHZpZXdQb2ludC5jb2xvciA9IGNvbG9yO1xuXHRcdHZpZXdQb2ludC5hbmdsZSA9IHBBbmdsZTtcblx0XHR2aWV3UG9pbnQubmFtZSA9IG5hbWU7XG5cdFx0dmlld1BvaW50LmNvdW50ID0gdGhpcy5vcmRlclBvaW50c0NyZWF0ZWQ7XG5cdFx0dGhpcy5vcmRlclBvaW50c0NyZWF0ZWQrKztcblx0XHRyZXR1cm4gdmlld1BvaW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gdHJhbnNsYXRlQ2FtZXJhKHtjYW1lcmEsIHBvaW50fSl7XG5cdFx0bGV0IG9yZ2lnaW5YID0gY2FtZXJhLnggLSAoY2FtZXJhLndpZHRoLzIpO1xuXHRcdGxldCBvcmdpZ2luWSA9IGNhbWVyYS55IC0gKGNhbWVyYS5oZWlnaHQvMik7XG5cdFx0bGV0IHR4ID0gTWF0aC5yb3VuZChwb2ludC54IC0gb3JnaWdpblgpO1xuXHRcdGxldCB0eSA9IE1hdGgucm91bmQocG9pbnQueSAtIG9yZ2lnaW5ZKTtcblx0XHRyZXR1cm4ge3g6dHgsIHk6dHl9O1xuXHR9IiwidmFyIFV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3NoYXJlZC9VdGlsaXRpZXMuanMnKTtcblxuZXhwb3J0cy5jcmVhdGUgPSAoe1xuXHRpZD0wLFxuXHR4PTAsXG5cdHk9MCxcblx0d2lkdGg9NTAsXG5cdGhlaWdodD01MCxcblx0YW5nbGU9MFxufSk9Pntcblx0bGV0IHRvcCAgICA9IHkgLSAoaGVpZ2h0LzIpO1xuXHRsZXQgYm90dG9tID0geSArIChoZWlnaHQvMik7XG5cdGxldCBsZWZ0ICAgPSB4IC0gKHdpZHRoLzIpO1xuXHRsZXQgcmlnaHQgID0geCArICh3aWR0aC8yKVxuXHRyZXR1cm4ge1xuXHRcdGlkOiBpZCxcblx0XHR4OiAgeCxcblx0XHR5OiAgeSxcblx0XHR3aWR0aDogd2lkdGgsXG5cdFx0aGVpZ2h0OmhlaWdodCxcblx0XHRhbmdsZTogYW5nbGUsXG5cdFx0dG9wOiAgICB0b3AsXG5cdFx0Ym90dG9tOiBib3R0b20sXG5cdFx0bGVmdDogICBsZWZ0LFxuXHRcdHJpZ2h0OiAgcmlnaHQsXG5cdFx0dG9wTGVmdDogICAgIHt4OiBsZWZ0LCB5OiB0b3B9LFxuXHRcdHRvcFJpZ2h0OiAgICB7eDogcmlnaHQsIHk6IHRvcH0sXG5cdFx0Ym90dG9tTGVmdDogIHt4OiBsZWZ0LCB5OiBib3R0b219LFxuXHRcdGJvdHRvbVJpZ2h0OiB7eDogcmlnaHQsIHk6IGJvdHRvbX0sXG5cdFx0cG9pbnRzOiAgICAgIFt7eDogbGVmdCwgeTogdG9wfSwge3g6IHJpZ2h0LCB5OiB0b3B9LCB7eDogbGVmdCwgeTogYm90dG9tfSwge3g6IHJpZ2h0LCB5OiBib3R0b219XVxuXHR9XG59IC8vY3JlYXRlXG5cbmZ1bmN0aW9uIG1vdmVUbyhvYmosIHgsIHkpe1xuXHRvYmouaGl0Ym94LnggPSB4O1xuXHRvYmouaGl0Ym94LnkgPSB5O1xuXHR1cGRhdGUob2JqKTtcbn1cbmV4cG9ydHMubW92ZVRvID0gbW92ZVRvO1xuXG5mdW5jdGlvbiB1cGRhdGUob2JqKXtcblx0bGV0IGhpdGJveCA9IG9iai5oaXRib3g7XG5cdGxldCB0b3AgICAgPSBoaXRib3gueSAtIChoaXRib3guaGVpZ2h0LzIpO1xuXHRsZXQgYm90dG9tID0gaGl0Ym94LnkgKyAoaGl0Ym94LmhlaWdodC8yKTtcblx0bGV0IGxlZnQgICA9IGhpdGJveC54IC0gKGhpdGJveC53aWR0aC8yKTtcblx0bGV0IHJpZ2h0ICA9IGhpdGJveC54ICsgKGhpdGJveC53aWR0aC8yKTtcblxuXHRoaXRib3gudG9wICAgID0gdG9wO1xuXHRoaXRib3guYm90dG9tID0gYm90dG9tO1xuXHRoaXRib3gubGVmdCAgID0gbGVmdDtcblx0aGl0Ym94LnJpZ2h0ICA9IHJpZ2h0O1xuXHRoaXRib3gudG9wTGVmdCAgICAgPSB7eDogbGVmdCwgeTogdG9wfTtcblx0aGl0Ym94LnRvcFJpZ2h0ICAgID0ge3g6IHJpZ2h0LCB5OiB0b3B9O1xuXHRoaXRib3guYm90dG9tTGVmdCAgPSB7eDogbGVmdCwgeTogYm90dG9tfTtcblx0aGl0Ym94LmJvdHRvbVJpZ2h0ID0ge3g6IHJpZ2h0LCB5OiBib3R0b219O1xuXHQvLyBoaXRib3gucG9pbnRzICAgICAgPSBbaGl0Ym94LnRvcExlZnQsIGhpdGJveC50b3BSaWdodCwgaGl0Ym94LmJvdHRvbUxlZnQsIGhpdGJveC5ib3R0b21SaWdodF07XG59XG5cbmZ1bmN0aW9uIGdldFZpc3VhbFBvaW50cyh7b2JqLCB2aWV3UG9pbnQsIGdldFBvaW50c0FmdGVyRWRnZT1mYWxzZX0pe1xuXG5cdGxldCByZXR1cm5Qb2ludHMgPSBbXTtcblx0aWYodmlld1BvaW50LnkgPCBvYmoudG9wKXsgICAgICAgICAgICAgIC8vTlcsIE4sIE5FXG5cdFx0aWYodmlld1BvaW50LnggPCBvYmoubGVmdCl7ICAgICAgICAgLy9OV1xuXHRcdFx0cmV0dXJuUG9pbnRzID0gW29iai50b3BMZWZ0LCBvYmoudG9wUmlnaHQsIG9iai5ib3R0b21MZWZ0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tTGVmdCxcblx0XHRcdFx0YW5nbGU6IDAuMDF9KTtcblx0XHRcdHBSb3RhdGVkQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ1cpO1xuXHRcdFx0bGV0IHBSb3RhdGVkQ0NXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wUmlnaHQsXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcblx0XHR9IGVsc2UgaWYodmlld1BvaW50LnggPiBvYmoucmlnaHQpeyAvL05FXG5cdFx0XHRyZXR1cm5Qb2ludHMgPSBbb2JqLnRvcExlZnQsIG9iai50b3BSaWdodCwgb2JqLmJvdHRvbVJpZ2h0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wTGVmdCxcblx0XHRcdFx0YW5nbGU6IDAuMDF9KTtcblx0XHRcdHBSb3RhdGVkQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ1cpO1xuXHRcdFx0bGV0IHBSb3RhdGVkQ0NXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tUmlnaHQsXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcblx0XHR9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL05cblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmoudG9wTGVmdCwgb2JqLnRvcFJpZ2h0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wTGVmdCxcblx0XHRcdFx0YW5nbGU6IDAuMDF9KTtcblx0XHRcdHBSb3RhdGVkQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ1cpO1xuXHRcdFx0bGV0IHBSb3RhdGVkQ0NXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wUmlnaHQsXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcblx0XHR9XG5cblx0fSBlbHNlIGlmKHZpZXdQb2ludC55ID4gb2JqLmJvdHRvbSl7ICAgIC8vU1csIFMsIFNFXG5cdFx0aWYodmlld1BvaW50LnggPCBvYmoubGVmdCl7ICAgICAgICAgLy9TV1xuXHRcdFx0cmV0dXJuUG9pbnRzID0gW29iai50b3BMZWZ0LCBvYmouYm90dG9tTGVmdCwgb2JqLmJvdHRvbVJpZ2h0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tUmlnaHQsXG5cdFx0XHRcdGFuZ2xlOiAwLjAxfSk7XG5cdFx0XHRwUm90YXRlZENXLmV4dGVuZCA9IHRydWU7XG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENXKTtcblx0XHRcdGxldCBwUm90YXRlZENDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxuXHRcdFx0XHRwb2ludDogb2JqLnRvcExlZnQsXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcblx0XHR9IGVsc2UgaWYodmlld1BvaW50LnggPiBvYmoucmlnaHQpeyAvL1NFXG5cdFx0XHRyZXR1cm5Qb2ludHMgPSBbb2JqLnRvcFJpZ2h0LCBvYmouYm90dG9tTGVmdCwgb2JqLmJvdHRvbVJpZ2h0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wUmlnaHQsXG5cdFx0XHRcdGFuZ2xlOiAwLjAxfSk7XG5cdFx0XHRwUm90YXRlZENXLmV4dGVuZCA9IHRydWU7XG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENXKTtcblx0XHRcdGxldCBwUm90YXRlZENDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxuXHRcdFx0XHRwb2ludDogb2JqLmJvdHRvbUxlZnQsXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcblx0XHR9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1Ncblx0XHRcdHJldHVyblBvaW50cyA9IFtvYmouYm90dG9tTGVmdCwgb2JqLmJvdHRvbVJpZ2h0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tUmlnaHQsXG5cdFx0XHRcdGFuZ2xlOiAwLjAxfSk7XG5cdFx0XHRwUm90YXRlZENXLmV4dGVuZCA9IHRydWU7XG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENXKTtcblx0XHRcdGxldCBwUm90YXRlZENDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxuXHRcdFx0XHRwb2ludDogb2JqLmJvdHRvbUxlZnQsXG5cdFx0XHRcdGFuZ2xlOiAtMC4wMX0pO1xuXHRcdFx0cFJvdGF0ZWRDQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ0NXKTtcblx0XHR9XG5cblx0fSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRSBvciBXXG5cdFx0aWYodmlld1BvaW50LnggPCBvYmoubGVmdCl7ICAgICAgICAgLy9XXG5cdFx0XHRyZXR1cm5Qb2ludHMgPSBbb2JqLnRvcExlZnQsIG9iai5ib3R0b21MZWZ0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmouYm90dG9tTGVmdCxcblx0XHRcdFx0YW5nbGU6IDAuMDF9KTtcblx0XHRcdHBSb3RhdGVkQ1cuZXh0ZW5kID0gdHJ1ZTtcblx0XHRcdHJldHVyblBvaW50cy5wdXNoKHBSb3RhdGVkQ1cpO1xuXHRcdFx0bGV0IHBSb3RhdGVkQ0NXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wTGVmdCxcblx0XHRcdFx0YW5nbGU6IC0wLjAxfSk7XG5cdFx0XHRwUm90YXRlZENDVy5leHRlbmQgPSB0cnVlO1xuXHRcdFx0cmV0dXJuUG9pbnRzLnB1c2gocFJvdGF0ZWRDQ1cpO1xuXHRcdH0gZWxzZSBpZih2aWV3UG9pbnQueCA+IG9iai5yaWdodCl7IC8vRVxuXHRcdFx0cmV0dXJuUG9pbnRzID0gW29iai50b3BSaWdodCwgb2JqLmJvdHRvbVJpZ2h0XTtcblx0XHRcdGxldCBwUm90YXRlZENXID0gVXRpbGl0aWVzLnJvdGF0ZVBvaW50KHtcblx0XHRcdFx0Y2VudGVyOiB2aWV3UG9pbnQsXG5cdFx0XHRcdHBvaW50OiBvYmoudG9wUmlnaHQsXG5cdFx0XHRcdGFuZ2xlOiAwLjAxfSk7XG5cdFx0XHRwUm90YXRlZENXLmV4dGVuZCA9IHRydWU7XG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENXKTtcblx0XHRcdGxldCBwUm90YXRlZENDVyA9IFV0aWxpdGllcy5yb3RhdGVQb2ludCh7XG5cdFx0XHRcdGNlbnRlcjogdmlld1BvaW50LFxuXHRcdFx0XHRwb2ludDogb2JqLmJvdHRvbVJpZ2h0LFxuXHRcdFx0XHRhbmdsZTogLTAuMDF9KTtcblx0XHRcdHBSb3RhdGVkQ0NXLmV4dGVuZCA9IHRydWU7XG5cdFx0XHRyZXR1cm5Qb2ludHMucHVzaChwUm90YXRlZENDVyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiQ2F0Y2ggaW4gZ2V0VmlzdWFsUG9pbnRzLCBwb3NzaWJseSB2aWV3UG9pbnQgaXMgaW5zaWRlIHRoZSBib3hcIik7XG5cdFx0fVxuXHR9XG5cblx0aWYocmV0dXJuUG9pbnRzLmxlbmd0aCA8IDQgfHwgcmV0dXJuUG9pbnRzLmxlbmd0aCA+IDUpIGNvbnNvbGUubG9nKFwiV3JvbmcgYW1vdW50IG9mIHBvaW50czpcIiwgcmV0dXJuUG9pbnRzLmxlbmd0aCk7XG5cblx0cmV0dXJuIHJldHVyblBvaW50cztcblxufVxuZXhwb3J0cy5nZXRWaXN1YWxQb2ludHMgPSBnZXRWaXN1YWxQb2ludHM7XG5cbmZ1bmN0aW9uIGNvbGxpZGluZyhvYmoxLCBvYmoyKSB7XG5cdC8vZG9lc250IHRha2UgYW5nbGUgaW50byBhY2NvdW50IHlldC5cblx0bGV0IGhpdGJveDEgPSBvYmoxLmhpdGJveDtcblx0bGV0IGhpdGJveDIgPSBvYmoyLmhpdGJveDtcblxuXHRsZXQgcm91Z2hDb2xsaWRpbmcgPSBmYWxzZTtcblx0Ly8gY29uc29sZS5sb2coXCJJbiBjb2xsaWRpbmc6XCIsIGhpdGJveDEsIGhpdGJveDIpO1xuXHRpZihoaXRib3gxLnRvcCA+IGhpdGJveDIuYm90dG9tIHx8XG5cdCAgIGhpdGJveDEuYm90dG9tIDwgaGl0Ym94Mi50b3AgfHxcblx0ICAgaGl0Ym94MS5yaWdodCA8IGhpdGJveDIubGVmdCB8fFxuXHQgICBoaXRib3gxLmxlZnQgPiBoaXRib3gyLnJpZ2h0KSB7XG5cdFx0cm91Z2hDb2xsaWRpbmcgPSBmYWxzZTtcblx0fSBlbHNlIHJvdWdoQ29sbGlkaW5nID0gdHJ1ZTtcblxuXHQvLyBpZihyb3VnaENvbGxpZGluZyl7XG5cdC8vIFx0Ly9UT0RPIG1ha2UgbW9yZSBncmFudWxhciBjb2xsaWRpbmcgd2l0aCBjb2xsaXNpb24gcG9pbnRzIGFuZCBzdWNoXG5cdC8vIH1cblx0XG5cdHJldHVybiByb3VnaENvbGxpZGluZztcbn0gLy9jb2xsaWRpbmdcbmV4cG9ydHMuY29sbGlkaW5nID0gY29sbGlkaW5nO1xuXG5mdW5jdGlvbiBjb2xsaWRlTGluZUxpbmUobGluZTEsIGxpbmUyKSB7XG5cblx0Ly8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSB0byBpbnRlcnNlY3Rpb24gcG9pbnRcblx0dmFyIHVBID0gKChsaW5lMi54Mi1saW5lMi54MSkqKGxpbmUxLnkxLWxpbmUyLnkxKSAtIFxuXHRcdFx0IChsaW5lMi55Mi1saW5lMi55MSkqKGxpbmUxLngxLWxpbmUyLngxKSkgLyBcblx0XHRcdCAoKGxpbmUyLnkyLWxpbmUyLnkxKSoobGluZTEueDItbGluZTEueDEpIC0gXG5cdFx0XHQgKGxpbmUyLngyLWxpbmUyLngxKSoobGluZTEueTItbGluZTEueTEpKTtcblx0dmFyIHVCID0gKChsaW5lMS54Mi1saW5lMS54MSkqKGxpbmUxLnkxLWxpbmUyLnkxKSAtIFxuXHRcdFx0IChsaW5lMS55Mi1saW5lMS55MSkqKGxpbmUxLngxLWxpbmUyLngxKSkgLyBcblx0XHRcdCAoKGxpbmUyLnkyLWxpbmUyLnkxKSoobGluZTEueDItbGluZTEueDEpIC0gXG5cdFx0XHQgKGxpbmUyLngyLWxpbmUyLngxKSoobGluZTEueTItbGluZTEueTEpKTtcblxuXHQvLyBpZiB1QSBhbmQgdUIgYXJlIGJldHdlZW4gMC0xLCBsaW5lcyBhcmUgY29sbGlkaW5nXG5cdGlmICh1QSA+PSAwICYmIHVBIDw9IDEgJiYgdUIgPj0gMCAmJiB1QiA8PSAxKSB7XG5cblx0ICB2YXIgaW50ZXJzZWN0aW9uWCA9IGxpbmUxLngxICsgKHVBICogKGxpbmUxLngyLWxpbmUxLngxKSk7XG5cdCAgdmFyIGludGVyc2VjdGlvblkgPSBsaW5lMS55MSArICh1QSAqIChsaW5lMS55Mi1saW5lMS55MSkpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBcInhcIjppbnRlcnNlY3Rpb25YLFxuICAgICAgICBcInlcIjppbnRlcnNlY3Rpb25ZXG4gICAgICB9O1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMuY29sbGlkZUxpbmVMaW5lID0gY29sbGlkZUxpbmVMaW5lO1xuXG5mdW5jdGlvbiBjb2xsaWRlTGluZVJlY3QobGluZSwgcmVjKSB7Ly94MSwgeTEsIHgyLCB5MiwgICByeCwgcnksIHJ3LCByaFxuXG4gIC8vY2hlY2sgaWYgdGhlIGxpbmUgaGFzIGhpdCBhbnkgb2YgdGhlIHJlY3RhbmdsZSdzIHNpZGVzLiB1c2VzIHRoZSBjb2xsaWRlTGluZUxpbmUgZnVuY3Rpb24gYWJvdmVcblxuXHRsZXQgbGVmdCA9ICAgdGhpcy5jb2xsaWRlTGluZUxpbmUoeDEseTEseDIseTIsIHJ4LHJ5LHJ4LCByeStyaCk7XG5cdGxldCByaWdodCA9ICB0aGlzLmNvbGxpZGVMaW5lTGluZSh4MSx5MSx4Mix5MiwgcngrcncscnksIHJ4K3J3LHJ5K3JoKTtcblx0bGV0IHRvcCA9ICAgIHRoaXMuY29sbGlkZUxpbmVMaW5lKHgxLHkxLHgyLHkyLCByeCxyeSwgcngrcncscnkpO1xuXHRsZXQgYm90dG9tID0gdGhpcy5jb2xsaWRlTGluZUxpbmUoeDEseTEseDIseTIsIHJ4LHJ5K3JoLCByeCtydyxyeStyaCk7XG5cdGxldCBpbnRlcnNlY3Rpb24gPSB7XG5cdFx0XCJsZWZ0XCIgOiBsZWZ0LFxuXHRcdFwicmlnaHRcIiA6IHJpZ2h0LFxuXHRcdFwidG9wXCIgOiB0b3AsXG5cdFx0XCJib3R0b21cIiA6IGJvdHRvbVxuXHR9XG5cbiAgLy9pZiBBTlkgb2YgdGhlIGFib3ZlIGFyZSB0cnVlLCB0aGUgbGluZSBoYXMgaGl0IHRoZSByZWN0YW5nbGVcbiAgaWYgKGxlZnQgfHwgcmlnaHQgfHwgdG9wIHx8IGJvdHRvbSkge1xuICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmNvbGxpZGVMaW5lUmVjdCA9IGNvbGxpZGVMaW5lUmVjdDsiLCJleHBvcnRzLmVycm9yID0gKHN0cmluZyk9Pntcblx0bmV3IEVycm9yKHN0cmluZyk7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbUNvbG9yKCl7XG5cdHJldHVybiB7XG5cdFx0cjogTWF0aC5mbG9vcigyNTUqTWF0aC5yYW5kb20oKSksXG5cdFx0ZzogTWF0aC5mbG9vcigyNTUqTWF0aC5yYW5kb20oKSksXG5cdFx0YjogTWF0aC5mbG9vcigyNTUqTWF0aC5yYW5kb20oKSlcblx0fVxufVxuZXhwb3J0cy5yYW5kb21Db2xvciA9IHJhbmRvbUNvbG9yO1xuXG5leHBvcnRzLm1pZFBvaW50ID0gKHBvaW50MSwgcG9pbnQyKT0+e1xuICAgIGxldCBtaWRkbGVYID0gcG9pbnQyLnggLSAoKHBvaW50Mi54LXBvaW50Mi54KS8yKTtcbiAgICBsZXQgbWlkZGxlWSA9IHBvaW50Mi55IC0gKChwb2ludDIueS1wb2ludDEueSkvMik7XG4gICByZXR1cm4ge3g6IG1pZGRsZVgsIHk6IG1pZGRsZVl9O1xufVxuXG5leHBvcnRzLnJvdGF0ZVBvaW50ID0gKHtjZW50ZXI9e3g6MCwgeTowfSwgcG9pbnQ9e3g6MCwgeTowfSwgYW5nbGU9MH0pPT57XG4gICAgICAgIGxldCBzID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICBsZXQgYyA9IE1hdGguY29zKGFuZ2xlKTtcblxuICAgICAgICAvL21ha2UgY29weVxuICAgICAgICBsZXQgbmV3UG9pbnQgPSB7eDogcG9pbnQueCwgeTogcG9pbnQueX07IFxuXG4gICAgICAgIC8vIHRyYW5zbGF0ZSBwb2ludCBiYWNrIHRvIG9yaWdpbjpcbiAgICAgICAgbmV3UG9pbnQueCAtPSBjZW50ZXIueDtcbiAgICAgICAgbmV3UG9pbnQueSAtPSBjZW50ZXIueTtcblxuICAgICAgICAvLyByb3RhdGUgcG9pbnRcbiAgICAgICAgbGV0IHhuZXcgPSBuZXdQb2ludC54ICogYyAtIG5ld1BvaW50LnkgKiBzO1xuICAgICAgICBsZXQgeW5ldyA9IG5ld1BvaW50LnggKiBzICsgbmV3UG9pbnQueSAqIGM7XG5cbiAgICAgICAgLy8gdHJhbnNsYXRlIHBvaW50IGJhY2s6XG4gICAgICAgIG5ld1BvaW50LnggPSB4bmV3ICsgY2VudGVyLng7XG4gICAgICAgIG5ld1BvaW50LnkgPSB5bmV3ICsgY2VudGVyLnk7XG4gICAgICAgIHJldHVybiBuZXdQb2ludDtcbiAgICB9XG5cbmV4cG9ydHMuZXh0ZW5kRW5kUG9pbnQgPSAoe3N0YXJ0UG9pbnQsIGVuZFBvaW50LCBsZW5ndGh9KT0+e1xuICAgIGxldCBjdXJyZW50bGVuZ3RoID0gTWF0aC5zcXJ0KFxuICAgICAgICBNYXRoLnBvdyhzdGFydFBvaW50LnggLSBlbmRQb2ludC54LCAyLjApICsgXG4gICAgICAgIE1hdGgucG93KHN0YXJ0UG9pbnQueSAtIGVuZFBvaW50LnksIDIuMClcbiAgICAgICAgKTtcbiAgICBsZXQgYW1vdW50ID0gbGVuZ3RoIC0gY3VycmVudGxlbmd0aDtcbiAgICBsZXQgbmV3RW5kUG9pbnQgPSB7XG4gICAgICAgIHg6IGVuZFBvaW50LnggKyAoKGVuZFBvaW50LnggLSBzdGFydFBvaW50LngpIC8gY3VycmVudGxlbmd0aCAqIGFtb3VudCksXG4gICAgICAgIHk6IGVuZFBvaW50LnkgKyAoKGVuZFBvaW50LnkgLSBzdGFydFBvaW50LnkpIC8gY3VycmVudGxlbmd0aCAqIGFtb3VudClcbiAgICB9O1xuICAgIHJldHVybiBuZXdFbmRQb2ludDtcbn1cblxuZnVuY3Rpb24gZGlzdChwb2ludDEsIHBvaW50Mil7XG4gICAgbGV0IGRpZmZYID0gTWF0aC5hYnMocG9pbnQxLnggLSBwb2ludDIueCk7XG4gICAgbGV0IGRpZmZZID0gTWF0aC5hYnMocG9pbnQxLnkgLSBwb2ludDIueSk7XG4gICAgbGV0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KChNYXRoLnBvdyhkaWZmWCwgMikgKyBNYXRoLnBvdyhkaWZmWSwyKSksIDIpO1xuICAgIHJldHVybiBkaXN0YW5jZTtcbn1cbmV4cG9ydHMuZGlzdCA9IGRpc3Q7XG5cbmV4cG9ydHMuY2FsY3VsYXRlQW5nbGUgPSAoe3BvaW50MSwgcG9pbnQyLCBjZW50ZXJQb2ludD17eDowLHk6MH19KT0+e1xuICAgIGlmKHBvaW50MS54ID09PSBwb2ludDIueCAmJiBwb2ludDEueSA9PT0gcG9pbnQyLnkpIHJldHVybiAwO1xuXG4gICAgbGV0IHAxVHJhbnMgPSB7eDogcG9pbnQxLnggLSBjZW50ZXJQb2ludC54LCB5OiBwb2ludDEueSAtIGNlbnRlclBvaW50Lnl9O1xuICAgIGxldCBwMlRyYW5zID0ge3g6IHBvaW50Mi54IC0gY2VudGVyUG9pbnQueCwgeTogcG9pbnQyLnkgLSBjZW50ZXJQb2ludC55fTtcbiAgICAvLyBsZXQgZGlmZlggICA9IHAxVHJhbnMueCAtIHAyVHJhbnMueDtcbiAgICAvLyBsZXQgZGlmZlkgICA9IHAxVHJhbnMueSAtIHAyVHJhbnMueTtcbiAgICAvLyB2YXIgYW5nbGVSYWRpYW5zID0gTWF0aC5hdGFuMihkaWZmWSwgZGlmZlgpO1xuICAgIGxldCBhbmdsZU9mUDEgPSBNYXRoLmF0YW4yKHAxVHJhbnMueSwgcDFUcmFucy54KTtcbiAgICBsZXQgYW5nbGVPZlAyID0gTWF0aC5hdGFuMihwMlRyYW5zLnksIHAyVHJhbnMueCk7XG4gICAgaWYoYW5nbGVPZlAxIDwgMCkgYW5nbGVPZlAxID0gYW5nbGVPZlAxICsgTWF0aC5QSSoyO1xuICAgIGlmKGFuZ2xlT2ZQMiA8IDApIGFuZ2xlT2ZQMiA9IGFuZ2xlT2ZQMiArIE1hdGguUEkqMjtcbiAgICBsZXQgYW5nbGVSYWRpYW5zID0gYW5nbGVPZlAyIC0gYW5nbGVPZlAxO1xuICAgIC8vIGlmKGFuZ2xlUmFkaWFucyA8IDApIGFuZ2xlUmFkaWFucyA9IChhbmdsZVJhZGlhbnMgKyBNYXRoLlBJKjIpO1xuICAgIHJldHVybiBhbmdsZVJhZGlhbnM7XG4gICAgLy8gbGV0IGFuZ2xlT2ZQMSA9IE1hdGguYXRhbjIocDFUcmFucy54LCBwMVRyYW5zLnkpO1xuICAgIC8vIGxldCBhbmdsZU9mUDIgPSBNYXRoLmF0YW4yKHBvaW50Mi55IC0gY2VudGVyUG9pbnQueSwgcG9pbnQyLnggLSBjZW50ZXJQb2ludC54KTtcbiAgICAvLyBpZihhbmdsZU9mUDEgPCAwKSBhbmdsZU9mUDEgPSBhbmdsZU9mUDEgKyBNYXRoLlBJKjI7XG4gICAgLy8gaWYoYW5nbGVPZlAyIDwgMCkgYW5nbGVPZlAyID0gYW5nbGVPZlAyICsgTWF0aC5QSSoyO1xuICAgIC8vYW5nbGUgaW4gcmFkaWFuc1xuICAgIC8vIHJldHVybiAgYW5nbGVPZlAyIC0gYW5nbGVPZlAxO1xufVxuXG5leHBvcnRzLm1hcE51bSA9ICh7aW5wdXQsIHN0YXJ0MSwgZW5kMSwgc3RhcnQyLCBlbmQyIH0pPT57XG4gICAgaWYoaW5wdXQ8c3RhcnQxKSBpbnB1dCA9IHN0YXJ0MTtcbiAgICBlbHNlIGlmKGlucHV0PmVuZDEpIGlucHV0ID0gZW5kMTtcbiAgICBsZXQgZGlmZlJhbmdlMSA9IGVuZDEgLSBzdGFydDE7XG4gICAgbGV0IGZyYWN0aW9uT2ZGaXJzdFJhbmdlID0gKGlucHV0IC0gc3RhcnQxKSAvIGRpZmZSYW5nZTE7XG4gICAgbGV0IGRpZmZSYW5nZTIgPSBlbmQyIC0gc3RhcnQyO1xuICAgIHJldHVybiAoZGlmZlJhbmdlMipmcmFjdGlvbk9mRmlyc3RSYW5nZSkgKyBzdGFydDI7XG59XG5cbmZ1bmN0aW9uIGNsb25lT2JqZWN0KG9iail7XG5cdC8vbWFrZSBhIG5ldyBvYmplY3QgdG8gcmV0dXJuXG5cdGxldCBuZXdPYmogPSB7fTtcblx0Ly9jb3B5IGFsbCBwcm9wZXJ0aWVzIG9udG8gbmV3b2JqZWN0XG5cdGZvcih2YXIgaWQgaW4gb2JqKXtcblx0XHRsZXQgcHJvcGVyeSA9IG9ialtpZF07XG5cdFx0aWYodHlwZW9mIHByb3BlcnkgPT09ICdvYmplY3QnICYmIHByb3BlcnkgIT09IG51bGwpe1xuXHRcdFx0bmV3T2JqW2lkXSA9IGNsb25lT2JqZWN0KHByb3BlcnkpO1xuXHRcdH1cblx0XHRpZihwcm9wZXJ5ICE9PSBudWxsKXtcblx0XHRcdG5ld09ialtpZF0gPSBwcm9wZXJ5O1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbmV3T2JqO1xufVxuZXhwb3J0cy5jbG9uZU9iamVjdCA9IGNsb25lT2JqZWN0O1xuXG5mdW5jdGlvbiBtZW1vcnlTaXplT2Yob2JqKSB7XG4gICAgdmFyIGJ5dGVzID0gMDtcblxuICAgIGZ1bmN0aW9uIHNpemVPZihvYmopIHtcbiAgICAgICAgaWYob2JqICE9PSBudWxsICYmIG9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzd2l0Y2godHlwZW9mIG9iaikge1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBieXRlcyArPSA4O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICBieXRlcyArPSBvYmoubGVuZ3RoICogMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgIGJ5dGVzICs9IDQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIHZhciBvYmpDbGFzcyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopLnNsaWNlKDgsIC0xKTtcbiAgICAgICAgICAgICAgICBpZihvYmpDbGFzcyA9PT0gJ09iamVjdCcgfHwgb2JqQ2xhc3MgPT09ICdBcnJheScpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighb2JqLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZU9mKG9ialtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBieXRlcyArPSBvYmoudG9TdHJpbmcoKS5sZW5ndGggKiAyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBieXRlcztcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZm9ybWF0Qnl0ZVNpemUoYnl0ZXMpIHtcbiAgICAgICAgaWYoYnl0ZXMgPCAxMDI0KSByZXR1cm4gYnl0ZXMgKyBcIiBieXRlc1wiO1xuICAgICAgICBlbHNlIGlmKGJ5dGVzIDwgMTA0ODU3NikgcmV0dXJuKGJ5dGVzIC8gMTAyNCkudG9GaXhlZCgzKSArIFwiIEtpQlwiO1xuICAgICAgICBlbHNlIGlmKGJ5dGVzIDwgMTA3Mzc0MTgyNCkgcmV0dXJuKGJ5dGVzIC8gMTA0ODU3NikudG9GaXhlZCgzKSArIFwiIE1pQlwiO1xuICAgICAgICBlbHNlIHJldHVybihieXRlcyAvIDEwNzM3NDE4MjQpLnRvRml4ZWQoMykgKyBcIiBHaUJcIjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZvcm1hdEJ5dGVTaXplKHNpemVPZihvYmopKTtcbn07IC8vbWVtb3J5U2l6ZU9mIFxuZXhwb3J0cy5tZW1vcnlTaXplT2YgPSBtZW1vcnlTaXplT2Y7Il0sInNvdXJjZVJvb3QiOiIifQ==